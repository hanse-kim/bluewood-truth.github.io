{"version":3,"file":"component---src-templates-{post}-tsx-content-file-path-posts-2024-07-19-spa-404-index-mdx-b00f3b72e7b92eb21e43.js","mappings":"yMAGA,SAASA,EAAkBC,GACzB,MAAMC,EAAcC,OAAOC,OAAO,CAChCC,EAAG,IACHC,GAAI,KACJC,OAAQ,SACRC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,KAAM,OACNC,EAAG,IACHC,GAAI,KACJC,KAAM,SACLC,EAAAA,EAAAA,KAAsBd,EAAMe,YAC/B,OAAOC,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMA,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,qCAAsC,KAAMY,EAAAA,cAAoBf,EAAYI,GAAI,KAAM,SAAU,KAAMW,EAAAA,cAAoBf,EAAYG,EAAG,KAAMY,EAAAA,cAAoBf,EAAYK,OAAQ,KAAM,2BAA4B,yIAA0I,KAAMU,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,wEAAyE,KAAMY,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,gBAAiBY,EAAAA,cAAoBf,EAAYK,OAAQ,KAAM,iBAAkB,+EAAgF,KAAMU,EAAAA,cAAoBf,EAAYI,GAAI,KAAM,oBAAqB,KAAMW,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,sFAAuF,KAAMY,EAAAA,cAAoBf,EAAYM,GAAI,KAAM,KAAMS,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,uCAAwC,MAAO,KAAMY,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,sCAAuC,MAAO,MAAO,KAAMY,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,4CAA6C,KAAMY,EAAAA,cAAoBf,EAAYQ,GAAI,KAAM,KAAMO,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAMY,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,kBAAmB,aAAc,KAAMM,EAAAA,cAAoBf,EAAYG,EAAG,KAAMY,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,kBAAmB,SAAUM,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,aAAc,KAAMM,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,gBAAiB,uFAAwF,KAAMM,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,2DAA4D,MAAO,KAAMY,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,sBAAuB,KAAMY,EAAAA,cAAoBf,EAAYG,EAAG,KAAMY,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,YAAa,WAAYM,EAAAA,cAAoBf,EAAYU,EAAG,CACpyEM,KAAM,kEACLD,EAAAA,cAAoBf,EAAYK,OAAQ,KAAM,kBAAmB,yDAA0D,KAAMU,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,0BAA2BY,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,KAAM,6EAA8E,KAAMM,EAAAA,cAAoBf,EAAYG,EAAG,KAAMY,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,KAAM,sIAAuI,MAAO,MAAO,KAAMM,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,mFAAoF,KAAMY,EAAAA,cAAoBf,EAAYI,GAAI,KAAM,yBAA0B,KAAMW,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,gDAAiDY,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,uBAAwB,mBAAoBM,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,mBAAoB,gBAAiBM,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,cAAe,wBAAyB,KAAMM,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,kBAAmBY,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,gBAAiB,uGAAwG,KAAMM,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,4CAA6CY,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,yBAA0B,YAAaM,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,SAAU,4CAA6CM,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,mBAAoB,UAAWM,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,gBAAiB,gBAAiB,KAAMM,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,kCAAmCY,EAAAA,cAAoBf,EAAYS,KAAM,KAAM,gBAAiB,yBAA0B,KAAMM,EAAAA,cAAoBf,EAAYI,GAAI,KAAM,mCAAoC,KAAMW,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,yHAA0H,KAAMY,EAAAA,cAAoBf,EAAYW,GAAI,KAAM,cAAe,KAAMI,EAAAA,cAAoBf,EAAYY,KAAM,CACzwEK,wBAAyB,CACvBC,OAAQ,6pGAER,KAAMH,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,OAAQY,EAAAA,cAAoBf,EAAYK,OAAQ,KAAM,wCAAyC,sCAAuC,KAAMU,EAAAA,cAAoBf,EAAYM,GAAI,KAAM,KAAMS,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,OAAQ,KAAMY,EAAAA,cAAoBf,EAAYM,GAAI,KAAM,KAAMS,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,oBAAqB,MAAO,KAAMY,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,2CAA4C,MAAO,MAAO,MAAO,KAAMY,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,OAAQ,KAAMY,EAAAA,cAAoBf,EAAYM,GAAI,KAAM,KAAMS,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,yBAA0B,MAAO,KAAMY,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,4EAA6E,MAAO,KAAMY,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,qDAAsD,MAAO,MAAO,MAAO,MAAO,KAAMY,EAAAA,cAAoBf,EAAYW,GAAI,KAAM,sBAAuB,KAAMI,EAAAA,cAAoBf,EAAYY,KAAM,CACv4CK,wBAAyB,CACvBC,OAAQ,05GAER,KAAMH,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,eAAgBY,EAAAA,cAAoBf,EAAYK,OAAQ,KAAM,uCAAwC,6CAA8C,KAAMU,EAAAA,cAAoBf,EAAYM,GAAI,KAAM,KAAMS,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,OAAQ,KAAMY,EAAAA,cAAoBf,EAAYM,GAAI,KAAM,KAAMS,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,qCAAsC,MAAO,KAAMY,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,4BAA6B,MAAO,MAAO,MAAO,KAAMY,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,OAAQ,KAAMY,EAAAA,cAAoBf,EAAYM,GAAI,KAAM,KAAMS,EAAAA,cAAoBf,EAAYO,GAAI,KAAM,wCAAyC,MAAO,MAAO,MAAO,KAAMQ,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,qHAAsH,KAAMY,EAAAA,cAAoBf,EAAYI,GAAI,KAAM,OAAQ,KAAMW,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,oIAAqI,KAAMY,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,kHAAmH,KAAMY,EAAAA,cAAoBf,EAAYG,EAAG,KAAM,2IACphD,CAKA,MAJA,SAAoBJ,QAAK,IAALA,IAAAA,EAAQ,CAAC,GAC3B,MAAOoB,QAASC,GAAanB,OAAOC,OAAO,CAAC,GAAGW,EAAAA,EAAAA,KAAsBd,EAAMe,YAC3E,OAAOM,EAAYL,EAAAA,cAAoBK,EAAWrB,EAAOgB,EAAAA,cAAoBjB,EAAmBC,IAAUD,EAAkBC,EAC9H,E,kDCxBA,MACasB,EAAOC,IAClB,IAAI,KAACC,GAAQD,EACb,OAAOE,EAAAA,EAAAA,GAAcC,EAAAA,EAAK,CACxBC,MAAOH,EAAKI,IAAIC,YAAYF,OAC5B,EAEEG,EAAWC,IACf,IAAIC,EAAuBC,EAC3B,IAAKT,MAAM,IAACI,GAAI,SAAEM,EAAQ,SAAEC,GAAYJ,EACxC,OAAON,EAAAA,EAAAA,GAAcW,EAAAA,EAAQ,MAAMX,EAAAA,EAAAA,GAAcY,EAAAA,EAAY,CAC3DC,QAAqJ,QAA3IN,EAA+D,QAAtCC,EAAkBC,EAASK,aAAuC,IAApBN,OAA6B,EAASA,EAAgBO,gBAAgD,IAA1BR,EAAmCA,EAAwBS,EAAAA,EAAOC,KAC/NC,KAAMf,GACLO,GAAU,EAGA,SAASS,EAAiB5C,GACvC,OAAOgB,EAAAA,cAAoBc,EAAU9B,EAAOgB,EAAAA,cAAoB6B,EAAqB7C,GACvF,C","sources":["webpack://hans-blog/./posts/2024/07-19-spa-404/index.mdx","webpack://hans-blog/./src/templates/{post}.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    h2: \"h2\",\n    strong: \"strong\",\n    ul: \"ul\",\n    li: \"li\",\n    ol: \"ol\",\n    code: \"code\",\n    a: \"a\",\n    h3: \"h3\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.p, null, \"실무에서 정적 사이트 배포 환경을 구성하며 겪은 이슈입니다.\"), \"\\n\", React.createElement(_components.h2, null, \"SPA란?\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"Single-page application\"), \"의 줄임말로, 말 그대로 단일 문서로 이루어진 웹사이트를 의미합니다. 페이지별로 HTML파일이 존재했던 고전적인 방식의 사이트와 달리 하나의 HTML로 구현되기 때문에, 사이트 내의 컨텐츠는 Javascript를 통해 동적으로 생성합니다.\"), \"\\n\", React.createElement(_components.p, null, \"Angular를 필두로 React, Vue 등 쟁쟁한 SPA 프레임워크가 등장하며 프론트엔드 개발의 주류로 자리매김합니다.\"), \"\\n\", React.createElement(_components.p, null, \"단일 문서를 사용하기에 \", React.createElement(_components.strong, null, \"클라이언트 사이드 라우팅\"), \"을 통해 페이지 이동을 구현하며, 새로운 문서를 로드하지 않고 화면이 전환되므로 사용자는 쾌적한 사이트 이용 경험을 얻을 수 있습니다.\"), \"\\n\", React.createElement(_components.h2, null, \"클라이언트 사이드 라우팅이란?\"), \"\\n\", React.createElement(_components.p, null, \"SPA에서 사용자가 링크를 클릭할 때마다 페이지를 새로고침하지 않고 다른 페이지로 이동하기 위한 개념입니다. 크게 다음 두 가지 기능을 포함합니다.\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"URL 변경을 감지해 그 경로에 매핑된 컴포넌트를 렌더링합니다.\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"새로고침을 유발하지 않고 사용자의 URL을 임의로 조작합니다.\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"사용자의 URL을 변경하는 방식은 또다시 두 가지로 구분할 수 있습니다.\"), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"window.history\"), \" API를 사용:\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"window.history\"), \" API의 \", React.createElement(_components.code, null, \"pushState\"), \", \", React.createElement(_components.code, null, \"replaceState\"), \" 등의 메서드를 사용하여 새로고침을 유발하지 않고 URL을 변경하는 방식입니다. Svelte의 svelte-routing 라이브러리가 이에 속합니다.\"), \"\\n\", React.createElement(_components.p, null, \"URL의 실제 경로를 변경하므로 정적 사이트로 배포할 경우, 후술할 404 오류 이슈를 유발합니다.\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"hash property를 사용:\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"Location\"), \" 인터페이스의 \", React.createElement(_components.a, {\n    href: \"https://developer.mozilla.org/en-US/docs/Web/API/Location/hash\"\n  }, React.createElement(_components.strong, null, \"hash property\")), \"를 사용하는 방식으로 Svelte의 svelte-spa-router 라이브러리가 이에 속합니다.\"), \"\\n\", React.createElement(_components.p, null, \"hash property란 URL의 뒤에 \", React.createElement(_components.code, null, \"#\"), \"과 함께 붙는 값으로, 본래는 현재 페이지 내에서 Hash property를 id로 갖는 엘리먼트 위치로 스크롤하는 역할을 합니다.\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"#\"), \" 뒤에 붙는 값은 기본적으로 브라우저 상에서만 인식되고, 서버 측에는 전달되지 않기 때문에 새로운 페이지 로드를 유발하지 않습니다. 이러한 특성으로 클라이언트 사이드 라우팅에 사용되기도 합니다. 한편 SEO에는 불리한 면이 있습니다.\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"저는 원래 2번 방식 기반의 라이브러리를 사용했기 때문에 큰 문제가 없었지만, 모종의 이유로 1번 방식으로 교체하면서 이슈를 겪게 되었습니다.\"), \"\\n\", React.createElement(_components.h2, null, \"SPA routing 404 오류 이슈\"), \"\\n\", React.createElement(_components.p, null, \"본디 URL이란 사용자가 원하는 리소스를 요청하기 위한 경로를 의미합니다. 즉, \", React.createElement(_components.code, null, \"https://foo.bar/baz\"), \"라는 주소로 요청을 한다면, \", React.createElement(_components.code, null, \"https://foo.bar\"), \" 웹 서버는 기본적으로 \", React.createElement(_components.code, null, \"./baz.html\"), \" 파일을 찾아서 응답으로 전송합니다.\"), \"\\n\", React.createElement(_components.p, null, \"그러나 SPA는 단일 문서(\", React.createElement(_components.code, null, \"./index.html\"), \")만이 존재하기 때문에, 다른 경로로 이동한 상태에서 새로고침 등으로 새 문서 로드를 유발하면 404 오류가 발생합니다. 그 경로에 해당하는 HTML이 존재하지 않기 때문입니다.\"), \"\\n\", React.createElement(_components.p, null, \"한편 해시 라우팅을 사용한다면 이 문제는 발생하지 않습니다. 예를 들어, \", React.createElement(_components.code, null, \"https://foo.bar/#/baz\"), \"라는 URL에서 \", React.createElement(_components.code, null, \"#/baz\"), \"는 Hash property이므로 서버는 이를 인식하지 못합니다. 따라서 \", React.createElement(_components.code, null, \"https://foo.bar\"), \" 웹 서버는 \", React.createElement(_components.code, null, \"./index.html\"), \"을 응답으로 보냅니다.\"), \"\\n\", React.createElement(_components.p, null, \"어쨌든 이를 해결하기 위해서는 어떤 경로로 요청을 하든 \", React.createElement(_components.code, null, \"./index.html\"), \"을 응답으로 보내도록 처리해야 합니다.\"), \"\\n\", React.createElement(_components.h2, null, \"AWS S3, CloudFront에서 오류 페이지 핸들링\"), \"\\n\", React.createElement(_components.p, null, \"저는 AWS S3와 CloudFront로 배포 환경을 구성했기 때문에 여기서 핸들링을 할 필요가 있었습니다. S3와 CloudFront 둘 다 오류 처리 기능을 제공했기 때문에, 둘 중 하나를 택해야 했습니다.\"), \"\\n\", React.createElement(_components.h3, null, \"S3에서 오류 처리\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/f528b673a9fa34973bdf4880d06d6709/f8057/s3-static-site-hosting.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 92.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACSElEQVR42qWUDVebMBSG+f8/bJ7N7UztpNgCpZSWUiXhG0KAd/emaqvTzW2c83DT5PYluR+xXN/H12/fMZv9wPXNDLe2Ddt2cEXjTxcXsO+W2IsCefExLCklfBL1PB9RFMFfBUiSBHmeg9fYqWo7KHWi696mrmtYVVXBce5gzx0sFkvMabzd7lCQkBASqRAQMkMsa4RphSRvoPse/Su01qibBlbTtmhpB2wZPQyGnhyenBXRKI2qO9qB1l8zjiPptLD4xUdchxvakaCtK/zro5SCVTYd5usYmzA8zk4nh+mM87nfCvIxJcWIk/C/jxHM6xbu9h5byvB2F2O/Tx5jRzFTA4qWgt0PHxfs6JVSNjnDS9eDS5gslyWSrEEkWxxKhU4Pfzy4EWypflpKRFZWKKsGBVHSrmvOPK3JZsC+7BEXPUb6k2E6MTxZmu+eYhjmGsEhh7+7R5CkxvrxA9woMawSAY/CstgkWEYHzIMd7iiRPPbi1Myv05JKqodVc9k0I25We1w6Aa5XMT7PA1y5ES4XG3yxfVw7HmbLAN7ugEUY49YLMV9F9JEDiSZwggg72ZwEs37CutBYCkV0cKVCkGmyPbz7knYtEFOHSPITaoJ8RHTMaMYP7WjCZI7MmRWpwKC5CzS1UW/ai3+fP9M0vcuLOtxEW3j+yvRsSb3NNhUZsrwwTkd+7d9z2IcTTFk+FnaW0fXzKMBVwb3JvNW378E3zvMOg3VIbEg4x0BCWh8viY+K8cefy6asanM87g4WYvu3cEj4yD8Btxdr55JIWNsAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/f528b673a9fa34973bdf4880d06d6709/89b46/s3-static-site-hosting.webp 180w,\\n/static/f528b673a9fa34973bdf4880d06d6709/97ead/s3-static-site-hosting.webp 360w,\\n/static/f528b673a9fa34973bdf4880d06d6709/fb07f/s3-static-site-hosting.webp 720w,\\n/static/f528b673a9fa34973bdf4880d06d6709/64908/s3-static-site-hosting.webp 1080w,\\n/static/f528b673a9fa34973bdf4880d06d6709/ff8d7/s3-static-site-hosting.webp 1440w,\\n/static/f528b673a9fa34973bdf4880d06d6709/1c223/s3-static-site-hosting.webp 1472w\\\"\\n              sizes=\\\"(max-width: 720px) 100vw, 720px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/f528b673a9fa34973bdf4880d06d6709/96042/s3-static-site-hosting.png 180w,\\n/static/f528b673a9fa34973bdf4880d06d6709/7a322/s3-static-site-hosting.png 360w,\\n/static/f528b673a9fa34973bdf4880d06d6709/16546/s3-static-site-hosting.png 720w,\\n/static/f528b673a9fa34973bdf4880d06d6709/6d80e/s3-static-site-hosting.png 1080w,\\n/static/f528b673a9fa34973bdf4880d06d6709/843f9/s3-static-site-hosting.png 1440w,\\n/static/f528b673a9fa34973bdf4880d06d6709/f8057/s3-static-site-hosting.png 1472w\\\"\\n            sizes=\\\"(max-width: 720px) 100vw, 720px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/f528b673a9fa34973bdf4880d06d6709/16546/s3-static-site-hosting.png\\\"\\n            alt=\\\"s3-static-site-hosting.png\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"S3의 \", React.createElement(_components.strong, null, \"정적 웹 사이트 호스팅(Static website hosting)\"), \" 기능을 사용하면 오류 시 보여줄 문서를 설정할 수 있습니다.\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"장점:\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"간편하게 설정할 수 있습니다.\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"S3의 기본 기능을 활용하기 때문에 추가적인 비용이 발생하지 않습니다.\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"단점:\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"세부적인 오류 처리 설정이 어렵습니다.\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"어디까지나 오류가 발생했을 때 응답으로 전송할 문서를 설정하는 것이기 때문에, 네트워크 상에서는 오류가 발생한 것으로 취급합니다.\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"검색 엔진이 특정 페이지를 없는 페이지로 판단할 수 있기에 SEO에 불리할 수 있습니다.\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.h3, null, \"CloudFront에서 오류 처리\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/f55ac2240ebf695fba5b5f5de08cee30/49d2b/cloudfront-custom-error-response.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 143.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAABYlAAAWJQFJUiTwAAADqUlEQVR42p1WyZLbVBTNkg9gE/6N76HYZM+OBZUPgMoqRSioAgIJlXSnO+72bMuTrHmyZQ19uOdKT7aDGYKqjp/ee9J59547yI+SNMVytcLV9TsMRyOMJxP07u5hLRa4u79HfzjU+dyycNvrYTqbge/ESXIRj7jZHwzw7XfPlPTV6z/wy8vfcH1zi59/fYnfX73G8+9f4N3Ne/zw40948/YaSZYhjGNEQnAKJYxkY5/nqOsaZVUqeH84HFAUB+Syx/3dbof9fq9jKoSXoIT8IWm/P8BsNldr+/0+LGuBdZAJGYkLRXNIcRHcI48SpuL2SnTcbGxMJlNMpzMslyvYYabW8eF/Q24I+XN68sPDA6qqwunFNTN+eG/AdzqXd6LNXFyczS11lVamaSbruWqz2+11zEQ/A7OeCWgdSbug0EJrscRwPFbSmaSI7TgaSc/3EUQR/CBAGHIM4YchPJkHMuf7fJbSMPpKSFd9P1ANPc+D43gS0Vxdq+vGnaqqT8bjPffpDZ9XQprJdAjkRJI6cprrejo6ritWhZ1OfJk4zmuFmZ9puFpvsLG3WEh0qSfB+7VYHcVN0tKbJGW+pep+bYJ3Sqgul4VqePu+p7rkh0KFp+gEq8kkL9c5J6gbA0KDVENZ6zTM5GFfAsAAUR/jTqPVBbCyylKhKSejEhoN6bLVusp7Vs1EEpxJXwpB83Kl90VLVLXrRsfGZfk5iLm2bauGjuNKgEIJiAd766gETJUwilVLehSEnEc65z6l4NUGJcYuLzC3fY3s/706C9NUTslyDGypaVm49ODf47wszyrFBIaaccy0tHYfbyEJKSwzfSAde7laS1eeYzQaa9fmOlNDe+J+r2nzYfO4SMgKYISnUsskDKNQRXc9vwsM7xksBoGRPrAPCvK2hXV5SEJe9nYrlbHR4BzaDtLlWjuWhuikD5qeeUbIXGpq2NUEb1LH1fWP11ATtBJXLYzGU9zc9jAYjnE/GEluOurqVg5yXF9alYstDxasN1tdZ3l2eWgsZCnxQVc6DhsAWxJdODaGpE3uBtogZM4Ep8t/IaRro/GkbRChWv1PHyUDvsugNV3cNIc2KH7QVEsip2sUu49QcYJ2rSiRF3JoWSPOpNuYoBh3iNP2FNPVS0jSBqGPJHKRCrLYQxJ6x8+owVGfy38zuDeWD5gb7XB4/jmGX3yC4ZPPcPflpwi+eoz95uqc8L+AH60wlvKcvEDw5mv4V0/hv/0Gyc1TJMEafwLgbq5ePprRbQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/f55ac2240ebf695fba5b5f5de08cee30/89b46/cloudfront-custom-error-response.webp 180w,\\n/static/f55ac2240ebf695fba5b5f5de08cee30/97ead/cloudfront-custom-error-response.webp 360w,\\n/static/f55ac2240ebf695fba5b5f5de08cee30/fb07f/cloudfront-custom-error-response.webp 720w,\\n/static/f55ac2240ebf695fba5b5f5de08cee30/6ded6/cloudfront-custom-error-response.webp 1046w\\\"\\n              sizes=\\\"(max-width: 720px) 100vw, 720px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/f55ac2240ebf695fba5b5f5de08cee30/96042/cloudfront-custom-error-response.png 180w,\\n/static/f55ac2240ebf695fba5b5f5de08cee30/7a322/cloudfront-custom-error-response.png 360w,\\n/static/f55ac2240ebf695fba5b5f5de08cee30/16546/cloudfront-custom-error-response.png 720w,\\n/static/f55ac2240ebf695fba5b5f5de08cee30/49d2b/cloudfront-custom-error-response.png 1046w\\\"\\n            sizes=\\\"(max-width: 720px) 100vw, 720px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/f55ac2240ebf695fba5b5f5de08cee30/16546/cloudfront-custom-error-response.png\\\"\\n            alt=\\\"cloudfront-custom-error-response.png\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"CloudFront의 \", React.createElement(_components.strong, null, \"사용자 정의 오류 응답(Custom error response)\"), \" 을 사용하면 에러 코드별로 어떻게 처리할지 세세하게 설정할 수 있습니다.\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"장점:\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"오류 코드별로 세세한 설정을 할 수 있어 유연성이 높습니다.\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"캐싱 기능을 통해 성능을 높일 수 있습니다.\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, \"단점:\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"CloudFront 사용에 따른 추가 비용이 발생할 수 있습니다.\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"둘 중 어느 방법을 선택하든 SPA는 정상적으로 동작하게 됩니다. 단, CloudFront에서 처리하는 것이 깔끔하고 SEO 친화적이기 때문에, 저는 CloudFront에서 처리하는 방법을 선택했습니다.\"), \"\\n\", React.createElement(_components.h2, null, \"마치며\"), \"\\n\", React.createElement(_components.p, null, \"저는 프론트엔드 개발을 Next.js로 시작했기 때문에, SPA나 CSR에 대해서는 공부할 때 잠깐 다뤄보기만 했지 실제로 배포까지 진행해본 적은 없었습니다. 그렇기에 이번에 맞딱뜨린 이 이슈는 저로서는 꽤나 생소한 것이었습니다.\"), \"\\n\", React.createElement(_components.p, null, \"아직 SSR 프레임워크가 유행하기 이전에는 아마 꽤 일반적인 이슈였을 것입니다. 서버 사이드 로직까지 다룰 수 있는 Next.js를 사용하면서 인프라에 대한 중요성을 잊고 있었던 게 아닌가 합니다.\"), \"\\n\", React.createElement(_components.p, null, \"이번 경험을 통해 프론트엔드 개발자라 할지라도 인프라와 배포 과정에 대한 충분한 이해가 필요함을 다시금 깨달았습니다. 기술이 발전하면서 개발 환경은 점점 더 편리해지고 있지만, 기본적인 원리와 문제 해결 능력은 여전히 중요한 요소일 것입니다.\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/Users/hans/Developer/ToyProject/bluewood-truth.github.io/posts/2024/07-19-spa-404/index.mdx\";\nimport React from 'react';\nimport {routes} from 'src/_common/constants/routes';\nimport {SEO} from 'src/components/seo';\nimport {Layout} from 'src/views/layout';\nimport {PostLayout} from 'src/views/post-layout';\nimport {jsx as ___EmotionJSX} from \"@emotion/react\";\nconst pageQuery = \"3375554023\";\nexport const Head = _ref => {\n  let {data} = _ref;\n  return ___EmotionJSX(SEO, {\n    title: data.mdx.frontmatter.title\n  });\n};\nconst PostPage = _ref2 => {\n  var _location$state$refer, _location$state;\n  let {data: {mdx}, location, children} = _ref2;\n  return ___EmotionJSX(Layout, null, ___EmotionJSX(PostLayout, {\n    backUrl: (_location$state$refer = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.referrer) !== null && _location$state$refer !== void 0 ? _location$state$refer : routes.home,\n    post: mdx\n  }, children));\n};\nPostPage\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostPage, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n"],"names":["_createMdxContent","props","_components","Object","assign","p","h2","strong","ul","li","ol","code","a","h3","span","_provideComponents","components","React","href","dangerouslySetInnerHTML","__html","wrapper","MDXLayout","Head","_ref","data","___EmotionJSX","SEO","title","mdx","frontmatter","PostPage","_ref2","_location$state$refer","_location$state","location","children","Layout","PostLayout","backUrl","state","referrer","routes","home","post","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}