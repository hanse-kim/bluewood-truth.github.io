"use strict";(self.webpackChunkhans_blog=self.webpackChunkhans_blog||[]).push([[256],{1233:function(e,t,n){n.r(t),n.d(t,{Head:function(){return g},default:function(){return E}});var l=n(8453),a=n(6540);function r(e){const t=Object.assign({p:"p",h2:"h2",strong:"strong",ul:"ul",li:"li",code:"code",a:"a",h3:"h3",span:"span"},(0,l.R)(),e.components);return a.createElement(a.Fragment,null,a.createElement(t.p,null,"이 블로그에서는 gatsby-plugin-mdx 플러그인을 사용해 마크다운을 파싱 및 렌더링하고 있습니다. 이 플러그인에 remarkGfm을 적용하며 발생한 이슈입니다."),"\n",a.createElement(t.h2,null,"GFM이란?"),"\n",a.createElement(t.p,null,a.createElement(t.strong,null,"GitHub Flavored Markdown"),"의 줄임말로, 기본적인 마크다운 문법의 확장입니다. Github에서 처음 지원하기 시작했으며 다음과 같은 추가 기능을 제공합니다."),"\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"확장 문법: 다음과 같은 요소를 위한 문법이 추가되었습니다.","\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"테이블"),"\n",a.createElement(t.li,null,"작업 목록 (Task list)"),"\n",a.createElement(t.li,null,"취소선"),"\n"),"\n"),"\n",a.createElement(t.li,null,"자동 링크 삽입: URL이나 이메일 주소를 자동으로 ",a.createElement(t.code,null,"<a>")," 태그로 감쌉니다."),"\n",a.createElement(t.li,null,"HTML 필터링: 마크다운에는 기본적으로 인라인 HTML 태그를 사용할 수 있지만, GFM에서는 ",a.createElement(t.code,null,"<script>"),"나 ",a.createElement(t.code,null,"<iframe>")," 등, 몇 가지의 HTML태그가 보안상의 이유로 무시됩니다."),"\n"),"\n",a.createElement(t.p,null,"대부분이 Github나 다른 마크다운 에디터에서 당연하게 사용하고 있던 기능들이라, 이것들이 확장 문법이라는 사실을 이번에 처음 알았습니다. 저는 테이블 문법이 동작하지 않는 원인을 찾다가 알게 되었습니다."),"\n",a.createElement(t.h2,null,"remark-gfm 적용"),"\n",a.createElement(t.p,null,a.createElement(t.a,{href:"https://www.gatsbyjs.com/plugins/gatsby-plugin-mdx/#mdxoptions"},"gatsby-plugin-mdx 공식문서"),"에 의하면, GFM을 적용하려면 gatsby-config에 remark-gfm을 추가해야 합니다. 저는 이 과정에서 두 가지 이슈를 겪었습니다."),"\n",a.createElement(t.h3,null,"모듈 시스템 문제"),"\n",a.createElement(t.p,null,"처음에 별 생각 없이 문서의 예시를 그대로 사용했는데 아래와 같은 에러가 발생했습니다. CommonJS에서 ESM의 구문(import문)을 사용했기 때문입니다."),"\n",a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SyntaxError: Cannot use import statement outside a module</code></pre></div>'}}),"\n",a.createElement(t.p,null,"반대로 import문을 require로 고쳐봤더니 또다시 에러가 발생했습니다. 알고 보니 ",a.createElement(t.code,null,"remark-gfm"),"은 ES 모듈이었고, 이를 ",a.createElement(t.code,null,"require()"),"로 불러오려고 해서 발생한 문제였습니다."),"\n",a.createElement(t.p,null,"이를 해결하기 위해 ",a.createElement(t.a,{href:"https://www.gatsbyjs.com/docs/how-to/custom-configuration/es-modules/"},"공식 문서"),"를 참고해 gatsby 파일들을 CommonJS에서 ESM으로 마이그레이션하는 작업을 진행했습니다."),"\n",a.createElement(t.h3,null,"패키지 버전 문제"),"\n",a.createElement(t.p,null,"모듈 시스템 문제를 해결하고 다시 실행해보니 이번에는 아래와 같은 에러가 발생했습니다."),"\n",a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ERROR #gatsby-plugin-mdx_10001 PLUGIN\n...\nTypeError: Cannot read properties of undefined (reading \'inTable\')</code></pre></div>'}}),"\n",a.createElement(t.p,null,"remarkGfm이 작동하는 과정에서 라이브러리 내부적으로 뭔가 이슈가 발생한 것 같았습니다. 구글링을 했더니 이미 ",a.createElement(t.a,{href:"https://github.com/gatsbyjs/gatsby/issues/38789"},"동일한 이슈"),"가 올라와 있었습니다."),"\n",a.createElement(t.p,null,"해당 이슈에서 제안한 대로 ",a.createElement(t.code,null,"remark-gfm"),"의 버전을 4.0.0에서 3.0.1(4.0.0 바로 아래 버전)로 낮춰서 해결했습니다."))}var c=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,l.R)(),e.components);return t?a.createElement(t,e,a.createElement(r,e)):r(e)},u=n(5693),m=n(7559),s=n(6964),o=n(4432),i=n(7437);const g=e=>{let{data:t}=e;return(0,i.Y)(m.k,{title:t.mdx.frontmatter.title})},d=e=>{var t,n;let{data:{mdx:l},location:a,children:r}=e;return(0,i.Y)(s.P,null,(0,i.Y)(o.n,{backUrl:null!==(t=null===(n=a.state)||void 0===n?void 0:n.referrer)&&void 0!==t?t:u.J.home,post:l},r))};function E(e){return a.createElement(d,e,a.createElement(c,e))}}}]);
//# sourceMappingURL=component---src-templates-{post}-tsx-content-file-path-posts-2024-02-18-remark-gfm-index-mdx-2b7a35b793d8bea618db.js.map