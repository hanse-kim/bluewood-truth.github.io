<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.8.1"/><link as="script" rel="preload" href="/webpack-runtime-67d7efa4096309242a6a.js"/><link as="script" rel="preload" href="/framework-c9eaa67d651d3d5ef420.js"/><link as="script" rel="preload" href="/app-58dbc8d2320a4185bf95.js"/><link as="script" rel="preload" href="/289354ec2d4c6e4cf5ed1da52de8c270038b3892-0ff34674674502ec3993.js"/><link as="script" rel="preload" href="/component---src-pages-post-mdx-slug-tsx-4ce64b5bf5f4c1259ceb.js"/><link as="fetch" rel="preload" href="/page-data/post/2022/02-16-gatsby-blog/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2278949984.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3702207254.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 11pfcjj">.css-11pfcjj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><div class="css-11pfcjj ex85nb17"><title>Gatsby 블로그 제작 - 페이지 생성</title><style data-emotion="css-global 1n74wzw">@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500&display=swap');html{box-sizing:border-box;font-size:16px;font-weight:400;line-height:1.55;-webkit-text-size-adjust:100%;}*,:after,:before{box-sizing:inherit;}body,h1,h2,h3,h4,h5,h6,ol,ul,p,pre,blockquote{margin:0;padding:0;font-weight:inherit;}main{display:block;}ol,ul{list-style:none;}img{border-style:none;max-width:100%;height:auto;object-fit:cover;}hr{box-sizing:content-box;height:0;overflow:visible;}a{background-color:transparent;color:inherit;outline:0;}a,a:active,a:hover{-webkit-text-decoration:none;text-decoration:none;}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;margin:0;}:root{--page-width:960px;--header-height:72px;--footer-height:120px;--z-index-base:0;--z-index-overlay:1100;--z-index-modal:1200;--color-main:#0076da;--color-text:#1a1e21;--color-text-footer:#3f4950;--color-text-quote:#63727e;--color-bg:#ffffff;--color-bg-footer:#f4f5f6;--color-border:#e6e8ea;--color-overlay:rgba(0, 0, 0, 0.5);--font-weight-thin:100;--font-weight-light:300;--font-weight-regular:400;--font-weight-medium:500;--font-size-xs:12px;--font-size-sm:14px;--font-size-md:16px;--font-size-lg:18px;--font-size-xl:20px;--font-size-h4:18px;--font-size-h3:20px;--font-size-h2:28px;--font-size-h1:32px;--font-size-sub-title:28px;--font-size-title:36px;}[data-theme='dark']{--color-main:#2c93ea;--color-text:#eff3f6;--color-text-footer:#c6d3dc;--color-text-quote:#a6bac9;--color-bg:#1a1e21;--color-bg-footer:#202d3a;--color-border:#2d3a47;}@media only screen and (max-width: 767px){html{font-size:14px;}:root{--page-width:100%;--header-height:45px;--footer-height:72px;--font-size-xs:10px;--font-size-sm:12px;--font-size-md:14px;--font-size-lg:16px;--font-size-h4:16px;--font-size-h3:18px;--font-size-h2:20px;--font-size-h1:24px;--font-size-sub-title:21px;--font-size-title:24.5px;}}code[class*='language-'],pre[class*='language-']{color:#657b83;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}pre[class*='language-']::selection,pre[class*='language-'] ::selection,code[class*='language-']::selection,code[class*='language-'] ::selection{background:#073642;}pre[class*='language-']{padding:1.5em 1em;overflow:auto;border-radius:0.3em;position:relative;}:not(pre)>code[class*='language-'],pre[class*='language-']{background-color:#fdf6e3;}.gatsby-highlight pre[class*='language-']::after{background-color:var(--color-main);border-radius:0px 0px 4px 4px;color:var(--color-bg);font-size:0.75rem;font-family:SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;letter-spacing:0.075em;line-height:1;padding:0.25rem 0.5rem;position:absolute;left:1.5rem;text-align:right;top:0;}.gatsby-highlight pre.language-javascript::after{content:"JavaScript";}.gatsby-highlight pre.language-typescript::after{content:"TypeScript";}.gatsby-highlight pre.language-jsx::after{content:"JSX";}.gatsby-highlight pre.language-tsx::after{content:"TSX";}.gatsby-highlight pre.language-shell::after{content:"Shell";background-color:var(--color-text-quote);}.gatsby-highlight pre.language-text::after{content:"Text";background-color:var(--color-text-quote);}.gatsby-highlight pre.language-css::after{content:"CSS";background-color:var(--color-text-quote);}.gatsby-highlight pre.language-html::after{content:"HTML";background-color:var(--color-text-quote);}.gatsby-highlight pre.language-markdown::after{content:"Markdown";background-color:var(--color-text-quote);}.gatsby-highlight pre.language-java::after{content:"Java";}:not(pre)>code[class*='language-']{padding:0.1em;border-radius:0.3em;}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#93a1a1;}.token.punctuation{color:#586e75;}.token.namespace{opacity:0.7;}.token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#268bd2;}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.url,.token.inserted{color:#2aa198;}.token.entity{color:#657b83;background:#eee8d5;}.token.atrule,.token.attr-value,.token.keyword{color:#859900;}.token.function,.token.class-name{color:#b58900;}.token.regex,.token.important,.token.variable{color:#cb4b16;}.token.important,.token.bold{font-weight:bold;}.token.italic{font-style:italic;}.token.entity{cursor:help;}pre[class*='language-'].line-numbers{position:relative;padding-left:3.5em;counter-reset:linenumber;}pre[class*='language-'].line-numbers>code{position:relative;white-space:inherit;}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;padding:1.5em 0 1.5em 1em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.line-numbers-rows>span{display:block;counter-increment:linenumber;}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:0.8em;text-align:right;}html{background-color:var(--color-bg-footer);}body{color:var(--color-text);background-color:var(--color-bg);font-weight:var(--font-weight-light);font-family:'Noto Sans KR',sans-serif;-webkit-font-smoothing:auto;-moz-osx-font-smoothing:auto;transform-style:preserve-3d;}pre[class*='language-']{background-color:var(--color-bg-footer);border:1px solid var(--color-border);}.caption{width:100%;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:-1rem;-webkit-transform:translateY(-1rem);-moz-transform:translateY(-1rem);-ms-transform:translateY(-1rem);transform:translateY(-1rem);}</style><style data-emotion="css q8kb3d">.css-q8kb3d{height:var(--header-height);border-bottom:1px solid var(--color-border);}</style><header class="css-q8kb3d ex85nb16"><style data-emotion="css fhgkvp">.css-fhgkvp{margin:0 auto;max-width:var(--page-width);height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}@media only screen and (max-width: 767px){.css-fhgkvp{padding-left:16px;padding-right:16px;}}</style><div class="css-fhgkvp ex85nb15"><style data-emotion="css ek3v2y">@media only screen and (max-width: 767px){.css-ek3v2y{-webkit-transform:scale(80%);-moz-transform:scale(80%);-ms-transform:scale(80%);transform:scale(80%);}}</style><div class="css-ek3v2y e1iojaem1"><a href="/blog"><style data-emotion="css z2dzj4">.css-z2dzj4{display:block;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;-webkit-transition:-webkit-transform 0.1s;transition:transform 0.1s;}.css-z2dzj4:hover{-webkit-transform:scale(105%);-moz-transform:scale(105%);-ms-transform:scale(105%);transform:scale(105%);}.css-z2dzj4:active{-webkit-transform:scale(110%);-moz-transform:scale(110%);-ms-transform:scale(110%);transform:scale(110%);}</style><span class="css-z2dzj4 e1iojaem0"><svg width="178" height="45" fill="none"><path d="M19.99 30.717h-1.68V20.589h-3.505v10.128h-1.68V10.653h1.68v8.352h3.504v-8.352h1.68v20.064Zm-18.577-19.8h8.976l-3.36 19.56H5.205L8.277 12.5H1.413v-1.584Zm38.53 16.2H26.19v2.544h14.112v1.584H24.51v-5.712h13.752v-2.16H24.51v-1.584h15.432v5.328Zm-16.224-7.128v-9.192h1.68v3.264h7.032v-3.264h1.68v9.192H23.719Zm19.655-3.912h-3.431v4.392h-1.68v-9.816h1.68v3.84h3.431v1.584ZM32.43 18.405v-2.76h-7.032v2.76h7.033Zm23.362 2.784c0 .32-.024.76-.072 1.32-.048.56-.112 1.152-.192 1.776a31.06 31.06 0 0 1-.288 1.824c-.096.592-.2 1.088-.312 1.488-.208.672-.488 1.208-.84 1.608-.352.4-.76.704-1.224.912a4.889 4.889 0 0 1-1.464.456c-.512.08-1.032.12-1.56.12-1.024 0-1.88-.128-2.568-.384-.672-.256-1.208-.624-1.608-1.104a3.555 3.555 0 0 1-.792-1.656c-.128-.624-.144-1.312-.048-2.064.048-.4.096-.84.144-1.32.048-.48.096-.944.144-1.392.064-.464.12-.896.168-1.296.064-.416.128-.76.192-1.032.16-.768.424-1.392.792-1.872.384-.48.824-.856 1.32-1.128a5.042 5.042 0 0 1 1.608-.552 10.494 10.494 0 0 1 1.728-.144c.848 0 1.584.112 2.208.336.624.224 1.136.536 1.536.936.416.4.712.872.888 1.416a4.52 4.52 0 0 1 .24 1.752Zm-2.28 5.112a34.395 34.395 0 0 0 .552-4.776c.032-.672-.04-1.216-.216-1.632-.16-.416-.392-.736-.696-.96-.304-.24-.656-.4-1.056-.48-.4-.08-.824-.12-1.272-.12-.32 0-.664.024-1.032.072a3.485 3.485 0 0 0-1.032.312 2.64 2.64 0 0 0-.912.744c-.272.32-.48.752-.624 1.296-.08.32-.16.712-.24 1.176-.064.448-.128.92-.192 1.416l-.144 1.416c-.048.464-.08.856-.096 1.176-.048.624.008 1.136.168 1.536.176.416.416.744.72.984.32.24.688.408 1.104.504.416.096.84.144 1.272.144.352 0 .72-.032 1.104-.096.384-.064.744-.2 1.08-.408a2.89 2.89 0 0 0 .936-.84c.272-.368.464-.856.576-1.464Zm11.472-4.68h-3.432v9.096h-1.68V10.653h1.68v9.384h3.432v1.584Zm-20.616-6v-1.584h5.496l.72-3.696h1.824l-.72 3.696h5.232v1.584H44.368Zm30.49 1.632v11.88H85.2v1.584H65.833v-1.584h7.344v-11.88h1.68Zm-7.753-6.504h16.488l-1.632 13.416h-1.776l1.44-11.832h-14.52v-1.584Zm26.09.168h11.255l-3.264 19.56h-1.8l2.976-17.976h-9.168v-1.584Zm17.687 19.8h-1.68V10.653h1.68v20.064Zm21.322-10.704h-7.296v2.16h8.88v1.584h-19.392v-1.584h8.832v-2.16h-6.936v-5.496h13.896V12.26h-13.872v-1.584h15.552V16.1h-13.896v2.328h14.232v1.584Zm-2.016 7.392h-14.136V25.82h15.816v5.4h-1.68v-3.816Zm16.26-6.216c0 .32-.024.76-.072 1.32-.048.56-.112 1.152-.192 1.776a31.06 31.06 0 0 1-.288 1.824c-.096.592-.2 1.088-.312 1.488-.208.672-.488 1.208-.84 1.608-.352.4-.76.704-1.224.912a4.889 4.889 0 0 1-1.464.456c-.512.08-1.032.12-1.56.12-1.024 0-1.88-.128-2.568-.384-.672-.256-1.208-.624-1.608-1.104a3.555 3.555 0 0 1-.792-1.656c-.128-.624-.144-1.312-.048-2.064.048-.4.096-.84.144-1.32.048-.48.096-.944.144-1.392.064-.464.12-.896.168-1.296.064-.416.128-.76.192-1.032.16-.768.424-1.392.792-1.872.384-.48.824-.856 1.32-1.128a5.042 5.042 0 0 1 1.608-.552 10.494 10.494 0 0 1 1.728-.144c.848 0 1.584.112 2.208.336.624.224 1.136.536 1.536.936.416.4.712.872.888 1.416a4.52 4.52 0 0 1 .24 1.752Zm-2.28 5.112a34.395 34.395 0 0 0 .552-4.776c.032-.672-.04-1.216-.216-1.632-.16-.416-.392-.736-.696-.96-.304-.24-.656-.4-1.056-.48-.4-.08-.824-.12-1.272-.12-.32 0-.664.024-1.032.072a3.485 3.485 0 0 0-1.032.312 2.64 2.64 0 0 0-.912.744c-.272.32-.48.752-.624 1.296-.08.32-.16.712-.24 1.176-.064.448-.128.92-.192 1.416l-.144 1.416c-.048.464-.08.856-.096 1.176-.048.624.008 1.136.168 1.536.176.416.416.744.72.984.32.24.688.408 1.104.504.416.096.84.144 1.272.144.352 0 .72-.032 1.104-.096.384-.064.744-.2 1.08-.408a2.89 2.89 0 0 0 .936-.84c.272-.368.464-.856.576-1.464Zm11.472-4.68h-3.432v9.096h-1.68V10.653h1.68v9.384h3.432v1.584Zm-20.616-6v-1.584h5.496l.72-3.696h1.824l-.72 3.696h5.232v1.584h-12.552Zm21.874-4.704h11.256l-3.264 19.56h-1.8l2.976-17.976h-9.168v-1.584Zm17.688 19.8h-1.68V10.653h1.68v20.064ZM27.936 41.86v-8.18h.7v8.18h-.7Zm2.732 0h-.75V35.6h.75v6.26Zm-.85-7.19v-.9h.95v.9h-.95Zm3.822-1.17v2.44h1.65v.66h-1.65v3.64c0 .3.083.557.25.77.166.22.44.33.82.33h.69v.63h-.58c-.38 0-.694-.05-.94-.15-.24-.1-.434-.237-.58-.41a1.484 1.484 0 0 1-.29-.63 3.69 3.69 0 0 1-.08-.8V36.6h-1.46v-.66h1.46V33.5h.71Zm4.296 0v2.44h1.65v.66h-1.65v3.64c0 .3.084.557.25.77.167.22.44.33.82.33h.69v.63h-.58c-.38 0-.693-.05-.94-.15-.24-.1-.433-.237-.58-.41a1.485 1.485 0 0 1-.29-.63 3.697 3.697 0 0 1-.08-.8V36.6h-1.46v-.66h1.46V33.5h.71Zm2.607 8.36v-8.18h.7v8.18h-.7Zm7.343-1.77c-.06.34-.174.63-.34.87-.16.24-.364.437-.61.59a2.65 2.65 0 0 1-.83.34c-.314.073-.65.11-1.01.11-.46 0-.867-.063-1.22-.19a2.38 2.38 0 0 1-.88-.55 2.259 2.259 0 0 1-.53-.86c-.12-.34-.18-.72-.18-1.14v-1.14c0-.42.063-.797.19-1.13.126-.34.31-.63.55-.87.24-.24.536-.423.89-.55.353-.133.76-.2 1.22-.2.453 0 .856.067 1.21.2.36.127.66.31.9.55.246.233.433.52.56.86.126.333.19.71.19 1.13v.81h-5.01v.23c0 .287.026.563.08.83.053.26.153.49.3.69.153.207.366.37.64.49.28.12.643.18 1.09.18.353 0 .653-.043.9-.13.253-.08.463-.183.63-.31.166-.12.293-.253.38-.4a1.26 1.26 0 0 0 .18-.41h.7Zm-4.9-1.83h4.27v-.31c0-.28-.05-.537-.15-.77-.1-.24-.244-.443-.43-.61a1.813 1.813 0 0 0-.67-.4c-.26-.093-.55-.14-.87-.14-.32 0-.614.047-.88.14a1.998 1.998 0 0 0-.68.39 1.797 1.797 0 0 0-.44.6c-.1.233-.15.49-.15.77v.33Zm9.449-4.76v2.87c.233-.293.53-.533.89-.72.36-.187.78-.28 1.26-.28.446 0 .836.067 1.17.2.34.127.623.31.85.55.226.233.393.52.5.86.113.333.17.71.17 1.13v1.14c0 .42-.054.8-.16 1.14-.1.34-.264.63-.49.87-.227.24-.517.423-.87.55-.354.133-.784.2-1.29.2-.48 0-.887-.093-1.22-.28a2.466 2.466 0 0 1-.81-.71v.03l-.12.81h-.58V33.5h.7Zm2.08 2.53a2.035 2.035 0 0 0-1.48.61c-.18.18-.324.39-.43.63a1.858 1.858 0 0 0-.17.73v1.27c0 .347.063.65.19.91.126.26.286.477.48.65.2.173.42.303.66.39.246.087.49.13.73.13.226 0 .463-.027.71-.08.246-.053.47-.153.67-.3.206-.14.373-.34.5-.6.133-.26.2-.6.2-1.02v-1.33c0-.26-.034-.51-.1-.75-.067-.24-.18-.45-.34-.63a1.612 1.612 0 0 0-.64-.44c-.26-.113-.587-.17-.98-.17Zm4.55 7.93 1.2-2.8-2.72-5.56h.81l2.28 4.69 2.03-4.69h.8l-3.62 8.36h-.78Zm7.982-2.1v-8.18h.7v8.18h-.7Zm2.733 0h-.75V35.6h.75v6.26Zm-.85-7.19v-.9h.95v.9h-.95Zm3.82-1.17v2.44h1.65v.66h-1.65v3.64c0 .3.084.557.25.77.168.22.44.33.82.33h.69v.63h-.58c-.38 0-.692-.05-.94-.15-.24-.1-.432-.237-.58-.41a1.484 1.484 0 0 1-.29-.63 3.697 3.697 0 0 1-.08-.8V36.6h-1.46v-.66h1.46V33.5h.71Zm4.298 0v2.44h1.65v.66h-1.65v3.64c0 .3.083.557.25.77.166.22.44.33.82.33h.69v.63h-.58c-.38 0-.694-.05-.94-.15-.24-.1-.434-.237-.58-.41a1.484 1.484 0 0 1-.29-.63 3.69 3.69 0 0 1-.08-.8V36.6h-1.46v-.66h1.46V33.5h.71Zm2.607 8.36v-8.18h.7v8.18h-.7Zm7.342-1.77c-.06.34-.173.63-.34.87-.16.24-.363.437-.61.59a2.65 2.65 0 0 1-.83.34c-.313.073-.65.11-1.01.11-.46 0-.867-.063-1.22-.19a2.38 2.38 0 0 1-.88-.55 2.258 2.258 0 0 1-.53-.86c-.12-.34-.18-.72-.18-1.14v-1.14c0-.42.063-.797.19-1.13.127-.34.31-.63.55-.87.24-.24.537-.423.89-.55.353-.133.76-.2 1.22-.2.453 0 .857.067 1.21.2.36.127.66.31.9.55.247.233.433.52.56.86.127.333.19.71.19 1.13v.81h-5.01v.23c0 .287.027.563.08.83.053.26.153.49.3.69.153.207.367.37.64.49.28.12.643.18 1.09.18.353 0 .653-.043.9-.13.253-.08.463-.183.63-.31a1.34 1.34 0 0 0 .38-.4c.093-.147.153-.283.18-.41h.7Zm-4.9-1.83h4.27v-.31c0-.28-.05-.537-.15-.77-.1-.24-.243-.443-.43-.61a1.814 1.814 0 0 0-.67-.4c-.26-.093-.55-.14-.87-.14-.32 0-.613.047-.88.14a1.996 1.996 0 0 0-.68.39 1.794 1.794 0 0 0-.44.6c-.1.233-.15.49-.15.77v.33Zm9.45-4.76v2.87c.232-.293.53-.533.89-.72.36-.187.78-.28 1.26-.28.446 0 .836.067 1.17.2.34.127.622.31.85.55.226.233.392.52.5.86.112.333.17.71.17 1.13v1.14c0 .42-.054.8-.16 1.14-.1.34-.264.63-.49.87a2.19 2.19 0 0 1-.87.55c-.354.133-.784.2-1.29.2-.48 0-.888-.093-1.22-.28a2.464 2.464 0 0 1-.81-.71v.03l-.12.81h-.58V33.5h.7Zm2.08 2.53a2.034 2.034 0 0 0-1.48.61c-.18.18-.324.39-.43.63a1.855 1.855 0 0 0-.17.73v1.27c0 .347.062.65.19.91.126.26.286.477.48.65.2.173.42.303.66.39.246.087.49.13.73.13.226 0 .462-.027.71-.08.246-.053.47-.153.67-.3.206-.14.372-.34.5-.6.132-.26.2-.6.2-1.02v-1.33c0-.26-.034-.51-.1-.75-.068-.24-.18-.45-.34-.63a1.613 1.613 0 0 0-.64-.44c-.26-.113-.588-.17-.98-.17Zm8.641 5.01c-.113.16-.257.3-.43.42-.167.12-.357.22-.57.3-.207.087-.427.15-.66.19-.227.04-.453.06-.68.06-.36 0-.693-.057-1-.17a2.332 2.332 0 0 1-.8-.49 2.286 2.286 0 0 1-.52-.78 2.836 2.836 0 0 1-.18-1.04V35.6h.7v3.85c0 .24.03.473.09.7.067.227.17.427.31.6.147.18.34.323.58.43.24.113.537.17.89.17.44 0 .803-.07 1.09-.21.293-.14.527-.317.7-.53.18-.213.303-.447.37-.7.073-.26.11-.507.11-.74V35.6h.7v6.26h-.66l-.04-.82Zm3.666-7.54v2.44h1.65v.66h-1.65v3.64c0 .3.084.557.25.77.167.22.44.33.82.33h.69v.63h-.58c-.38 0-.693-.05-.94-.15a1.5 1.5 0 0 1-.58-.41 1.492 1.492 0 0 1-.29-.63 3.716 3.716 0 0 1-.08-.8V36.6h-1.46v-.66h1.46V33.5h.71Zm5.763 6.27c.006.273.06.51.16.71.106.193.25.353.43.48s.39.22.63.28c.246.067.516.1.81.1.606 0 1.076-.087 1.41-.26.34-.167.506-.457.5-.87a.928.928 0 0 0-.16-.52 1.095 1.095 0 0 0-.4-.35 2.998 2.998 0 0 0-.63-.24 9.594 9.594 0 0 0-.82-.18c-.24-.04-.504-.093-.79-.16a3.302 3.302 0 0 1-.78-.29 1.987 1.987 0 0 1-.61-.52c-.16-.213-.24-.487-.24-.82 0-.253.06-.487.18-.7.126-.213.293-.397.5-.55.213-.16.463-.283.75-.37.286-.093.596-.14.93-.14.766 0 1.383.173 1.85.52.473.34.733.877.78 1.61h-.7c-.027-.2-.077-.39-.15-.57a1.194 1.194 0 0 0-.32-.47 1.413 1.413 0 0 0-.56-.31 2.717 2.717 0 0 0-.87-.12c-.294 0-.547.033-.76.1-.214.06-.39.14-.53.24a.98.98 0 0 0-.3.35.843.843 0 0 0-.1.4c0 .16.04.3.12.42.086.113.196.213.33.3.133.08.28.15.44.21.166.06.33.11.49.15.16.04.31.073.45.1.14.02.253.04.34.06.313.067.606.147.88.24.273.087.513.2.72.34a1.394 1.394 0 0 1 .66 1.23c0 .34-.067.627-.2.86a1.53 1.53 0 0 1-.54.57c-.227.147-.5.25-.82.31-.314.067-.664.1-1.05.1-.36 0-.704-.04-1.03-.12-.32-.08-.607-.21-.86-.39a2.038 2.038 0 0 1-.6-.7c-.147-.28-.227-.623-.24-1.03h.7Zm7.275-6.27v2.44h1.65v.66h-1.65v3.64c0 .3.083.557.25.77.166.22.44.33.82.33h.69v.63h-.58c-.38 0-.694-.05-.94-.15-.24-.1-.434-.237-.58-.41a1.48 1.48 0 0 1-.29-.63 3.654 3.654 0 0 1-.08-.8V36.6h-1.46v-.66h1.46V33.5h.71Zm7.752 6.59c-.06.34-.174.63-.34.87-.16.24-.364.437-.61.59-.24.153-.517.267-.83.34a4.43 4.43 0 0 1-1.01.11c-.46 0-.867-.063-1.22-.19a2.377 2.377 0 0 1-.88-.55 2.25 2.25 0 0 1-.53-.86c-.12-.34-.18-.72-.18-1.14v-1.14c0-.42.063-.797.19-1.13.126-.34.31-.63.55-.87.24-.24.536-.423.89-.55.353-.133.76-.2 1.22-.2.453 0 .856.067 1.21.2.36.127.66.31.9.55.246.233.433.52.56.86.126.333.19.71.19 1.13v.81h-5.01v.23c0 .287.026.563.08.83.053.26.153.49.3.69.153.207.366.37.64.49.28.12.643.18 1.09.18.353 0 .653-.043.9-.13.253-.08.463-.183.63-.31.166-.12.293-.253.38-.4.093-.147.153-.283.18-.41h.7Zm-4.9-1.83h4.27v-.31c0-.28-.05-.537-.15-.77a1.67 1.67 0 0 0-.43-.61 1.82 1.82 0 0 0-.67-.4c-.26-.093-.55-.14-.87-.14-.32 0-.614.047-.88.14a1.988 1.988 0 0 0-.68.39 1.782 1.782 0 0 0-.44.6c-.1.233-.15.49-.15.77v.33Zm5.813 1.82c0-.647.207-1.12.62-1.42.414-.307 1.054-.46 1.92-.46h2.21v-.58c0-.113-.02-.26-.06-.44a1.267 1.267 0 0 0-.26-.52 1.482 1.482 0 0 0-.55-.44c-.24-.127-.563-.19-.97-.19-.333 0-.61.037-.83.11-.22.073-.4.17-.54.29-.14.12-.25.26-.33.42a3.02 3.02 0 0 0-.18.48h-.75c.087-.62.357-1.107.81-1.46.454-.353 1.064-.52 1.83-.5.854.02 1.487.227 1.9.62.42.387.63.983.63 1.79v4.08h-.62l-.06-.75c-.32.32-.703.55-1.15.69-.446.14-.953.21-1.52.21-.306 0-.59-.037-.85-.11a1.75 1.75 0 0 1-.66-.35 1.573 1.573 0 0 1-.44-.6c-.1-.24-.15-.53-.15-.87Zm2.24 1.27c.394 0 .744-.05 1.05-.15.314-.093.577-.223.79-.39.22-.167.387-.36.5-.58a1.5 1.5 0 0 0 .17-.7v-.67h-2.33c-.333 0-.61.037-.83.11-.22.067-.396.157-.53.27a.933.933 0 0 0-.28.39c-.053.14-.08.287-.08.44 0 .14.017.283.05.43.04.153.114.293.22.42.114.127.27.23.47.31.2.08.467.12.8.12Zm9.804-7.85v8.36h-.58l-.12-.81v-.09c-.22.3-.506.55-.86.75-.353.2-.776.3-1.27.3-.48 0-.893-.067-1.24-.2-.34-.127-.62-.31-.84-.55-.22-.24-.383-.53-.49-.87-.1-.34-.15-.72-.15-1.14v-1.14c0-.42.057-.797.17-1.13.12-.34.294-.627.52-.86.234-.24.52-.423.86-.55.34-.133.737-.2 1.19-.2.5 0 .924.087 1.27.26.347.173.627.397.84.67v-2.8h.7Zm-.7 4.58c0-.26-.043-.513-.13-.76a1.821 1.821 0 0 0-.39-.65 2.03 2.03 0 0 0-1.52-.64c-.393 0-.726.057-1 .17a1.708 1.708 0 0 0-.65.44c-.166.18-.286.39-.36.63-.066.24-.1.49-.1.75v1.33c0 .42.06.76.18 1.02s.277.46.47.6c.194.147.407.247.64.3.234.053.467.08.7.08a2.277 2.277 0 0 0 1.43-.52c.214-.173.387-.39.52-.65.14-.26.21-.563.21-.91v-1.19Zm2.732 3.78h-.75V35.6h.75v6.26Zm-.85-7.19v-.9h.95v.9h-.95Zm2.131 7.19v-8.18h.7v8.18h-.7Zm3.063 2.1 1.2-2.8-2.72-5.56h.81l2.28 4.69 2.03-4.69h.8l-3.62 8.36h-.78Z" fill="#1A1E21"></path></svg></span></a></div><style data-emotion="css lkqrnz">.css-lkqrnz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-column-gap:24px;column-gap:24px;}</style><nav class="css-lkqrnz ex85nb14"><a href="/blog"><style data-emotion="css 1nc8p0v">.css-1nc8p0v{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background:none;border:none;padding-top:2px;cursor:pointer;-webkit-transition:text-shadow 0.2s;transition:text-shadow 0.2s;}.css-1nc8p0v:disabled{cursor:default;}.css-1nc8p0v:hover:not(:disabled){text-shadow:0 0 0.5px var(--color-text);}</style><button class="css-1nc8p0v ej4enpc1">posts<style data-emotion="css 13irkam">.css-13irkam{margin:1px auto 0 auto;width:0;height:1px;background-color:var(--color-text);-webkit-transition:width 0.2s;transition:width 0.2s;}.ej4enpc1:hover:not(:disabled)>.css-13irkam{width:100%;}</style><div class="css-13irkam ej4enpc0"></div></button></a><a href="/tag"><button class="css-1nc8p0v ej4enpc1">tags<div class="css-13irkam ej4enpc0"></div></button></a><button class="css-1nc8p0v ej4enpc1">search<div class="css-13irkam ej4enpc0"></div></button></nav></div></header><style data-emotion="css 1ff36h2">.css-1ff36h2{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><main class="css-1ff36h2 ex85nb13"><style data-emotion="css owiavo">.css-owiavo{position:relative;margin:0 auto;padding:48px 0 96px 0;max-width:var(--page-width);height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;row-gap:36px;}@media only screen and (max-width: 767px){.css-owiavo{padding:16px 16px 36px 16px;row-gap:24px;}}</style><div class="css-owiavo ex85nb12"><style data-emotion="css 1ywe81w animation-1vzvs4z">.css-1ywe81w{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;row-gap:36px;-webkit-animation:animation-1vzvs4z 0.5s ease;animation:animation-1vzvs4z 0.5s ease;}@-webkit-keyframes animation-1vzvs4z{from{opacity:0;-webkit-transform:translateY(10px);-moz-transform:translateY(10px);-ms-transform:translateY(10px);transform:translateY(10px);}to{opacity:1;-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}}@keyframes animation-1vzvs4z{from{opacity:0;-webkit-transform:translateY(10px);-moz-transform:translateY(10px);-ms-transform:translateY(10px);transform:translateY(10px);}to{opacity:1;-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}}</style><article class="css-1ywe81w ejzcnoo2"><style data-emotion="css muc85u">.css-muc85u{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;row-gap:16px;}</style><header class="css-muc85u ejzcnoo1"><a href="/blog"><button class="css-1nc8p0v ej4enpc1">&lt; 이전 페이지로<div class="css-13irkam ej4enpc0"></div></button></a><hgroup><style data-emotion="css 4qfs0">.css-4qfs0{font-weight:var(--font-weight-light);font-size:var(--font-size-title);}</style><h1 class="css-4qfs0 e1sw3jtw2">Gatsby 블로그 제작 - 페이지 생성</h1><style data-emotion="css harc7a">.css-harc7a{font-weight:var(--font-weight-thin);font-size:var(--font-size-md);}</style><p class="css-harc7a e1sw3jtw0">작성일: 2022-02-16</p></hgroup><style data-emotion="css 1yupmj4">.css-1yupmj4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-column-gap:8px;column-gap:8px;}</style><span class="css-1yupmj4 e1bzxavb0"><a href="/tag/react"><style data-emotion="css nlsog3">.css-nlsog3{padding:3px 8px 4px 8px;border:none;border-radius:4px;font-size:var(--font-size-xs);font-weight:var(--font-weight-regular);color:var(--color-main);background-color:var(--color-border);cursor:pointer;-webkit-transition:color 0.2s,background-color 0.2s;transition:color 0.2s,background-color 0.2s;}.css-nlsog3:hover{color:var(--color-bg);background-color:var(--color-main);}</style><span class="css-nlsog3 e1bzxavb1">React</span></a><a href="/tag/gatsby"><span class="css-nlsog3 e1bzxavb1">Gatsby</span></a><a href="/tag/graph-ql"><span class="css-nlsog3 e1bzxavb1">GraphQL</span></a></span></header><style data-emotion="css 2in4ak">.css-2in4ak{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;row-gap:var(--font-size-md);}</style><div class="css-2in4ak ejzcnoo0"><style data-emotion="css fdtbo8">.css-fdtbo8{width:100%;border-bottom:1px solid var(--color-border);}</style><hgroup class="css-fdtbo8 e1g4hu6w13"><style data-emotion="css 1ah6edn">.css-1ah6edn{font-weight:var(--font-weight-regular);font-size:var(--font-size-h2);}</style><h2 class="css-1ah6edn e1g4hu6w11">개요</h2></hgroup><style data-emotion="css 1ncc39t">.css-1ncc39t{font-weight:var(--font-weight-regular);font-size:var(--font-size-h4);}</style><h4 class="css-1ncc39t e1g4hu6w9">어떤 블로그를 만들까?</h4><div><p>내가 블로그를 하려는 이유는 기본적으로 공부한 내용을 정리하고 찾아보기 위함이다. 이에 필요한 기능들을 생각해봤다.</p></div><style data-emotion="css 1magvvh">.css-1magvvh{padding-left:2rem;list-style:revert;}div>div>.css-1magvvh{margin-top:var(--font-size-sm);}</style><ul class="css-1magvvh e1g4hu6w8"><style data-emotion="css 1o5bol2">.css-1o5bol2:not(:first-of-type){margin-top:var(--font-size-sm);}</style><li class="css-1o5bol2 e1g4hu6w6"><style data-emotion="css 139iib9">.css-139iib9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;row-gap:var(--font-size-sm);}</style><div class="css-139iib9 e1g4hu6w5"><div><p>기본적으로 Jekyll처럼 마크다운 파일을 이용해 정적 페이지를 생성</p></div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><p>전체 포스트 목록을 볼 수 있는 페이지</p></div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><p>태그별 포스트 목록을 볼 수 있는 페이지</p></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>각 포스트 목록은 페이지네이션함</div></div></li></ul></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><p>블로그 내 포스트 검색 기능</p></div></div></li></ul><div><p>우선은 이 정도가 필요할 듯하다. 기본적인 컨셉은 위키처럼 원하는 내용을 쉽게 찾아볼 수 있도록 검색과 하이퍼링크를 적극적으로 활용하고 싶다.</p></div><h4 class="css-1ncc39t e1g4hu6w9">왜 Gatsby인가?</h4><div><p>예전에 정적 사이트 생성기 Jekyll로 블로그를 만들어보면서 고생한 적이 있다. Jekyll은 일단 Ruby 언어로 만들어져 환경 세팅부터 빌드까지의 과정이 복잡했고, 마음에 드는 테마를 찾아도 내 입맛에 맞게 커스터마이징하기가 너무 번거로웠다.</p></div><div><p>그래서 이번에는 React 기반의 정적 사이트 생성기인 Gatsby를 사용하기로 했다. 처음에는 단순히 내게 익숙한 React 기반이라는 점 때문에 택했지만, 실제로 사용해보면서 매우 매력적인 프레임워크임을 알게 되었다. </p></div><h4 class="css-1ncc39t e1g4hu6w9">Gatsby란?</h4><div><p>GraphQL로 데이터를 다루고, React로 컴포넌트를 만들고, 빌드 결과물로서 정적인 파일들을 생성하는 프론트엔드 프레임워크이다.</p></div><div><p>일반적인 React App은 빌드시 텅 빈 HTML과 JavaScript 파일을 생성한다. 이를 실행하면 JavaScript 코드를 통해 HTML 내용물을 렌더링하게 된다. 반면 Gatsby는 빌드 시 렌더링을 마친 정적 페이지들을 생성하고, 필요하다면 JavaScript 코드를 통해 추가적인 동작을 하게 된다.</p></div><div><p>Gatsby는 다음과 같은 장점이 있다.</p></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>코드 분할, 이미지 최적화, 중요한 스타일(critical style)의 인라인화, 레이지 로딩, 리소스 프리페치 등을 통해 뛰어난 성능을 보여준다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>노드(node)라는 데이터 단위를 통한 유연한 데이터 구조와 다양한 플러그인을 통해 다양한 파일, 데이터베이스, CMS의 데이터를 다룰 수 있고, 쉽게 원하는 기능을 추가할 수 있다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>빌드된 정적 파일들은 서버와 완전히 분리되어 있으므로 데이터베이스는 악의적인 요청이나 DDOS 공격 등에 대해 안전하다.</div></div></li></ul><p>덧붙여서 공식 문서의 튜토리얼(<style data-emotion="css dnz6zw">.css-dnz6zw{color:var(--color-main);-webkit-text-decoration:underline;text-decoration:underline;}.css-dnz6zw:visited{color:purple;}</style><a href="https://www.gatsbyjs.com/docs/tutorial/" class="css-dnz6zw e1g4hu6w3">#</a>)이 아주 알차다. React나 GraphQL을 전혀 모르더라도 충분히 따라갈 수 있도록 step-by-step으로 친절하게 설명이 되어 있다. 만약 GraphQL, 혹은 React을 처음 배운다면 Gatsby로 시작해보는 것도 좋은 선택일 것이다.</p><h4 class="css-1ncc39t e1g4hu6w9">주요 개념</h4><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1080px">
      <a class="gatsby-resp-image-link css-dnz6zw e1g4hu6w3" href="/static/cefa34ca1c1fecfbfa357155bbd15ce3/12bfc/Gatsby.jpg" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:95.92592592592594%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHuhKBQjQn/xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAEFAh//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAZEAADAAMAAAAAAAAAAAAAAAAAARARMUH/2gAIAQEAAT8hFoR0zHf/2gAMAwEAAgADAAAAEKDHwP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABwQAAICAgMAAAAAAAAAAAAAAAABESExURBBYf/aAAgBAQABPxC5fRodaMBwvTNGokSgyMu+P//Z&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/cefa34ca1c1fecfbfa357155bbd15ce3/1ee96/Gatsby.webp 270w,/static/cefa34ca1c1fecfbfa357155bbd15ce3/be7f3/Gatsby.webp 540w,/static/cefa34ca1c1fecfbfa357155bbd15ce3/64908/Gatsby.webp 1080w,/static/cefa34ca1c1fecfbfa357155bbd15ce3/b3e76/Gatsby.webp 1439w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/webp"/>
          <source srcSet="/static/cefa34ca1c1fecfbfa357155bbd15ce3/371c3/Gatsby.jpg 270w,/static/cefa34ca1c1fecfbfa357155bbd15ce3/c00a7/Gatsby.jpg 540w,/static/cefa34ca1c1fecfbfa357155bbd15ce3/44838/Gatsby.jpg 1080w,/static/cefa34ca1c1fecfbfa357155bbd15ce3/12bfc/Gatsby.jpg 1439w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/jpeg"/>
          <style data-emotion="css 1ou3qqd">.css-1ou3qqd{margin:0 auto;display:block;}</style><img class="gatsby-resp-image-image css-1ou3qqd e1g4hu6w0" src="/static/cefa34ca1c1fecfbfa357155bbd15ce3/44838/Gatsby.jpg" alt="Gatsby" title="Gatsby" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
        </picture>
  </a>
    </span></p><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>Gatsby 사이트에서 사용되는 모든 데이터는 <style data-emotion="css 13ixm15">.css-13ixm15{font-weight:var(--font-weight-medium);}</style><strong class="css-13ixm15 e1g4hu6w4">GraphQL 데이터 계층(data layer)</strong>에 위치한다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>로컬 파일, 데이터베이스, CMS 등 다양한 데이터 <strong class="css-13ixm15 e1g4hu6w4">소스(source)</strong>들은 <strong class="css-13ixm15 e1g4hu6w4">source plugin</strong>을 통해 데이터 계층에 추가될 수 있다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>데이터 계층의 정보들은 <strong class="css-13ixm15 e1g4hu6w4">노드(node)</strong>라는 데이터 단위로 존재한다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><strong class="css-13ixm15 e1g4hu6w4">transformer plugin</strong>을 통해 기존 노드들로부터 새로운 노드들을 생성할 수 있다.</div></div></li></ul><style data-emotion="css 15f5hom">.css-15f5hom{color:var(--color-text-quote);padding:1rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;row-gap:14px;border:1px dashed var(--color-border);border-left:0.25rem solid var(--color-border);}</style><blockquote class="css-15f5hom e1g4hu6w2"><p> 예를 들어 컴퓨터의 파일시스템에 접근하게 해주는 <style data-emotion="css zjezr">.css-zjezr{font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;background-color:var(--color-bg-footer);border:1px solid var(--color-border);border-radius:4px;padding:0 0.25em;margin:0 2px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;color:var(--color-main);}</style><code class="css-zjezr e1g4hu6w1">gatsby-source-filesystem</code> 플러그인을 이용해 특정 경로의 로컬 파일을 File 노드로서 데이터 계층에 추가할 수 있다.</p><p>그리고 <code class="css-zjezr e1g4hu6w1">gatsby-plugin-mdx</code> 플러그인을 사용하면 확장자가 <code class="css-zjezr e1g4hu6w1">.mdx</code>인 File 노드들로부터 MDX 노드를 만들 수 있다. MDX 노드는 <code class="css-zjezr e1g4hu6w1">.mdx</code>파일의 특성에 맞게 처리되어 파일 최상단의 YAML 정보, mdx 포맷으로 변환된 파일 내용 등의 정보를 포함한다.</p></blockquote><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>데이터 계층의 노드들은 <strong class="css-13ixm15 e1g4hu6w4">GraphQL 쿼리</strong>를 사용해 리액트 컴포넌트에서 사용할 수 있다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>언급했듯 다양한 플러그인을 설치하여 손쉽게 기능을 확장할 수 있다. Gatsby 플러그인을 사용하는 순서는 크게 다음과 같다.<style data-emotion="css zd747l">.css-zd747l{padding-left:2rem;list-style:auto;}div>div>.css-zd747l{margin-top:var(--font-size-sm);}</style><ol class="css-zd747l e1g4hu6w7"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">npm</code>으로 플러그인을 설치한다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">gatsby-config.js</code>의 <code class="css-zjezr e1g4hu6w1">plugins</code> 필드에 설치한 플러그인을 추가한다. </div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>플러그인을 사용한다.</div></div></li></ol></div></div></li></ul><hgroup class="css-fdtbo8 e1g4hu6w13"><h2 class="css-1ah6edn e1g4hu6w11">진행과정</h2></hgroup><h4 class="css-1ncc39t e1g4hu6w9">0. Gatsby 프로젝트 생성</h4><p><code class="css-zjezr e1g4hu6w1">npm</code>으로 <code class="css-zjezr e1g4hu6w1">gatsby-cli</code>를 전역으로 설치하면 <code class="css-zjezr e1g4hu6w1">gatsby</code> 명령어를 사용할 수 있게 된다.</p><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> <span class="token function">install</span> -g gatsby-cli
$ gatsby -v
<span class="token operator">&gt;</span> Gatsby CLI version: <span class="token number">4.8</span>.0</code></pre></div><div><p>이제 Gatsby 프로젝트를 시작하기 위한 두 가지 방법이 있는데,</p></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">gatsby new</code>로 시작해서 처음부터 구현하는 방법</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>일종의 boilerplate인 gatsby-starter를 사용하는 방법</div></div></li></ul><div><p>처음에는 스타터를 이용해 빠르게 시작할까도 생각해봤지만, 새로운 React 프레임워크를 만지는 건 오랫만이라 손이 근질근질하고 직접 구현해보고픈 욕구가 생겼다. 그래서 처음부터 만들어보는 것을 택했다.</p></div><p><code class="css-zjezr e1g4hu6w1">gatsby new</code> 명령어를 입력하면 초기설정과 함께 Gatsby 프로젝트를 생성할 수 있다. 나는 TypeScript, Emotion 정도만 선택하고 나머지는 필요할 때마다 추가하기로 했다.</p><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ gatsby new
<span class="token punctuation">..</span>.
<span class="token operator">&gt;</span> √ Will you be using JavaScript or TypeScript?
<span class="token operator">&gt;</span> · TypeScript
<span class="token operator">&gt;</span> √ Will you be using a CMS?
<span class="token operator">&gt;</span> · No <span class="token punctuation">(</span>or I&#x27;ll <span class="token function">add</span> it later<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> √ Would you like to <span class="token function">install</span> a styling system?
<span class="token operator">&gt;</span> · Emotion</code></pre></div><h4 class="css-1ncc39t e1g4hu6w9">1. 포스트 목록을 표시하기</h4><p>우선은 <code class="css-zjezr e1g4hu6w1">src/posts</code>에 더미 <code class="css-zjezr e1g4hu6w1">.mdx</code> 파일들을 20개 정도 만들었다. 대강 이런 식이다.</p><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">posts/post1/index.mdx</code></div></li></ul><div class="gatsby-highlight" data-language="markdown"><pre class="language-markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml">title: 1번째 포스트입니다
date: 2022-01-01</span>
<span class="token punctuation">---</span></span>
1번째 포스트의 내용입니다.</code></pre></div><div><p>다음으로 몇 가지 필요한 플러그인을 추가했다.</p></div><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> <span class="token function">install</span> gatsby-plugin-root-import
$ <span class="token function">npm</span> <span class="token function">install</span> gatsby-source-filesystem
$ <span class="token function">npm</span> <span class="token function">install</span> gatsby-plugin-mdx @mdx-js/mdx@v1 @mdx-js/react@v1</code></pre></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">gatsby-config.js</code></div></li></ul><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">siteMetadata</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#x27;개발하고 기록하기&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//...</span>
    <span class="token string">&#x27;gatsby-plugin-root-import&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-source-filesystem</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">posts</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/posts/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-plugin-mdx</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.mdx</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.md</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">gatsbyRemarkPlugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><blockquote class="css-15f5hom e1g4hu6w2"><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">siteMetadata</code> 필드: 말 그대로 사이트의 메타데이터를 입력할 수 있다. 이 메타데이터는 별도의 플러그인 없이 GraphQL 쿼리로 접근 가능한 데이터 중 하나다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">gatsby-plugin-root-import</code>: 절대경로 import를 사용하기 위한 플러그인.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">gatsby-source-filesystem</code>: 컴퓨터의 파일시스템을 사용하기 위한 source 플러그인.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">gatsby-plugin-mdx</code>: File node를 MDX node로 변환하는 transformer 플러그인.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">@mdx-js/mdx</code>: MDX를 구현한 라이브러리.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">@mdx-js/react</code>: MDX 구현을 React 컴포넌트에 매핑하기 위한 라이브러리.</div></div></li></ul></blockquote><p>이제 <code class="css-zjezr e1g4hu6w1">src/posts</code> 안에 있는 파일들은 File node로서 데이터 계층에 추가되고, 그 중 확장자가 <code class="css-zjezr e1g4hu6w1">.mdx</code>인 노드들로부터 MDX node들이 생성될 것이다. <code class="css-zjezr e1g4hu6w1">gatsby develop</code> 명령어로 개발자 모드로 실행하고 GraphiQL(<code class="css-zjezr e1g4hu6w1">localhost:8000/___graphql</code>)로 들어가서 확인해볼 수 있다.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1080px">
      <a class="gatsby-resp-image-link css-dnz6zw e1g4hu6w3" href="/static/8f3bfef3d2a4f2c3c034f6e30dcb23ad/171d2/GraphiQL.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:64.81481481481481%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB80lEQVQoz1XRa0/bMBQG4Pz/nzQNadIYm1pGN7KWtlSDQsnF9+P7iZ1kaqKh8shfbJ3X9rGL9XpdTxiljLHD4fB4YZruH7aPu81mv93c/1nvdrvtdrfZbMqyLHJKfc5KKe9dRPTe13XVTiihnAvOWE04a1vaVFXTSimF4JTSum4KA9pYh4jDMIzjaIzhXGhj4ySEECNqAM6lBG2cA2PBGOP8y+upaBrhQxrHcQ4TQkKI4BBTP/4XY2RUCamji94FZz1iYowXWlgM+TIcQ3ARjY4p5oypTymEYJWtGkFrYYmy0oSIQsqCSwj44WTrXN8P44UpbFqiVCvNG7fiHOZSFlJpH7spfK6jlIYQ3veaeW3hSPQr1UcCRwIv1LaKC1lY5xqusctzHWOs67rxIw8Gnhr11Ki/rXqs4bnVL+ePKBCRUbCAfZeGlDnnQggppQIIsxi1UPBM4JXCkZpKmFZ5cOeeU+q0cGjTkPOQsvdea22tdc6llFKXUs5WarV/U/s3fWK6FoZIrx0XogDQTJqpx2EYB+88Is63Hea1cXRg5KFWTw2c6HlUzBDFKCty7l3M7+31fX/5VLOMKdaArY6VQmo64bIKzvvibrX6vvj5+75cT1arVVmWD5e221+3d8vP17dfbpZX35afvi6vrlc3ix+LxT9Cc9pURbSQ4QAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/8f3bfef3d2a4f2c3c034f6e30dcb23ad/1ee96/GraphiQL.webp 270w,/static/8f3bfef3d2a4f2c3c034f6e30dcb23ad/be7f3/GraphiQL.webp 540w,/static/8f3bfef3d2a4f2c3c034f6e30dcb23ad/64908/GraphiQL.webp 1080w,/static/8f3bfef3d2a4f2c3c034f6e30dcb23ad/71c32/GraphiQL.webp 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/webp"/>
          <source srcSet="/static/8f3bfef3d2a4f2c3c034f6e30dcb23ad/77615/GraphiQL.png 270w,/static/8f3bfef3d2a4f2c3c034f6e30dcb23ad/2d29d/GraphiQL.png 540w,/static/8f3bfef3d2a4f2c3c034f6e30dcb23ad/6d80e/GraphiQL.png 1080w,/static/8f3bfef3d2a4f2c3c034f6e30dcb23ad/171d2/GraphiQL.png 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/png"/>
          <img class="gatsby-resp-image-image css-1ou3qqd e1g4hu6w0" src="/static/8f3bfef3d2a4f2c3c034f6e30dcb23ad/6d80e/GraphiQL.png" alt="GraphiQL" title="GraphiQL" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
        </picture>
  </a>
    </span></p><blockquote class="css-15f5hom e1g4hu6w2"><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>id: 각 노드의 고유 id</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>frontmatter: mdx 파일 최상단의 YAML 정보</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>body: mdx 포맷으로 변환된 파일 내용</div></div></li></ul></blockquote><div><p>이 GraphiQL 도구는 데이터 계층에 추가된 노드들을 탐색하고 필요한 쿼리를 작성하는 데 유용하다.</p></div><div><p>이제 데이터도 추가했고 쿼리도 작성했으니 실제로 사이트에 띄워봤다.</p></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/types.ts</code></div></li></ul><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span>Node<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;gatsby&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">SiteNode</span> <span class="token keyword">extends</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  siteMetadata<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">MdxNode</span> <span class="token keyword">extends</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  frontmatter<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    date<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  body<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/components/layout.tsx</code></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>graphql<span class="token punctuation">,</span> useStaticQuery<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;gatsby&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>SiteNode<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;src/types&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
  title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  children<span class="token operator">?</span><span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> query <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query {
    site {
      siteMetadata {
        title
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Layout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>title<span class="token punctuation">,</span> children<span class="token punctuation">}</span><span class="token operator">:</span> Props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useStaticQuery</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span>site<span class="token operator">:</span> SiteNode<span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title <span class="token operator">||</span> data<span class="token punctuation">.</span>site<span class="token punctuation">.</span>siteMetadata<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Layout<span class="token punctuation">;</span></code></pre></div><blockquote class="css-15f5hom e1g4hu6w2"><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">Layout</code> 컴포넌트: 블로그의 모든 페이지에 공통적으로 들어갈 요소들을 래핑한 컴포넌트. 지금은 <code class="css-zjezr e1g4hu6w1">title</code> 태그 뿐이지만 추후 header, footer 등 정적인 요소를 추가할 것이다.</div></div></li></ul></blockquote><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/pages/blog/index.tsx</code></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>graphql<span class="token punctuation">,</span> PageProps<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;gatsby&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">&#x27;src/components/layout&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>MdxNode<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;src/types&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">DataType</span> <span class="token punctuation">{</span>
  allMdx<span class="token operator">:</span> <span class="token punctuation">{</span>
    nodes<span class="token operator">:</span> MdxNode<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> pageQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  {
    allMdx(sort: {order: DESC, fields: frontmatter___date}) {
      nodes {
        id
        frontmatter {
          title
          date(formatString: &quot;YYYY-MM-DD&quot;)
        }
        body
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">BlogPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>data<span class="token operator">:</span> <span class="token punctuation">{</span>allMdx<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">:</span> PageProps<span class="token operator">&lt;</span>DataType<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Posts</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>allMdx<span class="token punctuation">.</span>nodes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> BlogPage<span class="token punctuation">;</span></code></pre></div><blockquote class="css-15f5hom e1g4hu6w2"><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>일반 컴포넌트와 페이지 컴포넌트에서 GraphQL 쿼리를 사용하는 방식이 다르다.<ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>일반 컴포넌트는 <code class="css-zjezr e1g4hu6w1">useStaticQuery</code> 훅에 쿼리를 넣어 데이터를 가져올 수 있다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>페이지 컴포넌트는 페이지 쿼리를 <code class="css-zjezr e1g4hu6w1">export</code>하여 컴포넌트의 props로 데이터를 가져올 수 있다.</div></div></li></ul></div></div></li></ul></blockquote><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>결과 (<code class="css-zjezr e1g4hu6w1">localhost:8000/blog</code>)</div></div></li></ul><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1080px">
      <a class="gatsby-resp-image-link css-dnz6zw e1g4hu6w3" href="/static/645c3881afbbb1b5c89ed16220132ab5/171d2/post-%EB%AA%A9%EB%A1%9D.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:64.81481481481481%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABKElEQVQoz5XSwY6CMBCA4b7/k60XVwgijRBNGGiBARRLC6WlGzhpNqvsd+6fmUxKKKWccwCoVnEcn8/n+Aml0fFET8eAhkEUBFEUncIwCALf9wljTErpnDPGaD1Za92radJyMFpKM0jd91rrcRy11k3TkCRJLterEKLrOiGEnWf3yby+KcuSTFqnAHmec8YQ0Rj7JnqOEZEoJQGgKEpEbNr299p/Ta6qikgp0/VaiHi73bbHQoglvlyuaQqQpgUvjDFuG6UUGYaBMXa/38XjsRzMzhtjKSVRSqUAjDHOOWK9Ze2XGLKsWNX1P2Mpl2tXZVkjtm07Tcs/mT9xzvV9T6y1kGWIWNd113Vus3Ecied5X7vd/nvvHQ6e74dhSCkFgOytPM+TJPkBpfvq2M8AMbkAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/645c3881afbbb1b5c89ed16220132ab5/1ee96/post-%EB%AA%A9%EB%A1%9D.webp 270w,/static/645c3881afbbb1b5c89ed16220132ab5/be7f3/post-%EB%AA%A9%EB%A1%9D.webp 540w,/static/645c3881afbbb1b5c89ed16220132ab5/64908/post-%EB%AA%A9%EB%A1%9D.webp 1080w,/static/645c3881afbbb1b5c89ed16220132ab5/71c32/post-%EB%AA%A9%EB%A1%9D.webp 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/webp"/>
          <source srcSet="/static/645c3881afbbb1b5c89ed16220132ab5/77615/post-%EB%AA%A9%EB%A1%9D.png 270w,/static/645c3881afbbb1b5c89ed16220132ab5/2d29d/post-%EB%AA%A9%EB%A1%9D.png 540w,/static/645c3881afbbb1b5c89ed16220132ab5/6d80e/post-%EB%AA%A9%EB%A1%9D.png 1080w,/static/645c3881afbbb1b5c89ed16220132ab5/171d2/post-%EB%AA%A9%EB%A1%9D.png 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/png"/>
          <img class="gatsby-resp-image-image css-1ou3qqd e1g4hu6w0" src="/static/645c3881afbbb1b5c89ed16220132ab5/6d80e/post-%EB%AA%A9%EB%A1%9D.png" alt="post 목록" title="post 목록" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
        </picture>
  </a>
    </span></p><div><p>날짜에 대해 내림차순으로 데이터를 가져왔으므로 최신순으로 포스트 목록이 잘 보인다!</p></div><h4 class="css-1ncc39t e1g4hu6w9">2. MDX 파일로부터 정적 페이지 생성하기</h4><p>Gatsby는 기본적으로 <strong class="css-13ixm15 e1g4hu6w4">File System Route API</strong>라는 기능을 제공한다. <code class="css-zjezr e1g4hu6w1">src/pages</code> 안에  <code class="css-zjezr e1g4hu6w1">{nodeType.fieldName}.tsx</code>와 같은 식으로 페이지 템플릿 컴포넌트를 작성하면 데이터 계층의 노드를 바탕으로 동적 페이지를 생성하고 라우팅한다.</p><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">nodeType</code>은 어떤 노드로부터 페이지를 만들지를 결정한다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><code class="css-zjezr e1g4hu6w1">fieldName</code>은 노드의 어떤 필드를 URL에 사용할지를 결정한다.</div></div></li></ul><p>MDX 노드는 기본적으로 <code class="css-zjezr e1g4hu6w1">slug</code> 필드를 갖는데, <code class="css-zjezr e1g4hu6w1">.mdx</code> 파일의 경로 + 파일이름이 <code class="css-zjezr e1g4hu6w1">path/file-name</code> 꼴로 인코딩되어 있어 URL에 사용하기 적합하다. </p><div><p>마크다운 문법이 잘 표시되는지 확인하기 위해 포스트 내용을 조금 수정했다. 그리고 포스트 템플릿 페이지를 만들고 포스트 목록 페이지에도 포스트 페이지에 접근할 수 있도록 링크를 추가했다.</p></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">posts/post1/index.mdx</code></div></li></ul><div class="gatsby-highlight" data-language="markdown"><pre class="language-markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml">title: 1번째 포스트입니다
date: 2022-01-01</span>
<span class="token punctuation">---</span></span>
1번째 포스트의 내용입니다.

<span class="token title important"><span class="token punctuation">#</span> heading1</span>
<span class="token title important"><span class="token punctuation">##</span> heading2</span>
<span class="token title important"><span class="token punctuation">###</span> heading3</span>

<span class="token list punctuation">-</span> first
<span class="token list punctuation">-</span> second
<span class="token list punctuation">-</span> third</code></pre></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/pages/blog/post/{mdx.slug}.tsx</code></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>graphql<span class="token punctuation">,</span> Link<span class="token punctuation">,</span> PageProps<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;gatsby&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">&#x27;src/components/layout&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>MdxNode<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;src/types&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>MDXRenderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;gatsby-plugin-mdx&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">DataType</span> <span class="token punctuation">{</span>
  mdx<span class="token operator">:</span> MdxNode<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> pageQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query ($id: String) {
    mdx(id: {eq: $id}) {
      frontmatter {
        title
        date(formatString: &quot;YYYY-MM-DD&quot;)
      }
      body
    }
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">PostPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>data<span class="token operator">:</span> <span class="token punctuation">{</span>mdx<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">:</span> PageProps<span class="token operator">&lt;</span>DataType<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>mdx<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>/blog<span class="token punctuation">&#x27;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">목록으로 가기</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>mdx<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">작성일: </span><span class="token punctuation">{</span>mdx<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MDXRenderer</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>mdx<span class="token punctuation">.</span>body<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MDXRenderer</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> PostPage<span class="token punctuation">;</span></code></pre></div><blockquote class="css-15f5hom e1g4hu6w2"><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><p>템플릿 페이지의 페이지 쿼리는 다른 페이지 쿼리와 조금 다르다. 쿼리 변수를 설정하고 원하는 노드를 찾기 위한 조건을 설정해줘야 한다. 위와 같은 경우 $id 쿼리 변수를 받아 id 필드가 $id 변수와 동일한 노드를 찾는 쿼리이다.</p></div><p>쿼리 변수로 사용될 값은 페이지 컴포넌트의 <code class="css-zjezr e1g4hu6w1">props</code> 중 <code class="css-zjezr e1g4hu6w1">pageContext</code>의 필드 중에서 정할 수 있는데, 일반적으로 노드 id가 사용된다.</p></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p><code class="css-zjezr e1g4hu6w1">MDXRenderer</code> 컴포넌트를 사용해 MDX 노드의 <code class="css-zjezr e1g4hu6w1">body</code>를 HTML로 바꾸어 표시할 수 있다.</p></div></li></ul></blockquote><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/pages/blog/index.tsx</code></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> pageQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  {
    allMdx(sort: {order: DESC, fields: frontmatter___date}) {
      nodes {
		...
        slug
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">BlogPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>data<span class="token operator">:</span> <span class="token punctuation">{</span>allMdx<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">:</span> PageProps<span class="token operator">&lt;</span>DataType<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      ...
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>allMdx<span class="token punctuation">.</span>nodes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>slug <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/blog/post/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">&#x27;#&#x27;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            ...
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code></pre></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>결과 (<code class="css-zjezr e1g4hu6w1">localhost:8000/blog/post/post1/</code>)</div></div></li></ul><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1080px">
      <a class="gatsby-resp-image-link css-dnz6zw e1g4hu6w3" href="/static/9b9e4e1bf1f103396b512825c722c867/171d2/%ED%8F%AC%EC%8A%A4%ED%8A%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:64.81481481481481%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA5klEQVQoz53R226EIBCAYd7/9QQEDzUkytp6guyKMKJs2DZNvNhu3e96/skEECGkbS91XXdfXdf3eZ5xxoqHPM95xEjKU4I5xQxjxlhKKcY4SRKkhutyddu2ee9h/REe9n333q8rGOvBGG8NzDMAOOestcuyoIxzStOqqsqiyLLsdpu/s/AKAKD2sx2GUWttzOxcPOHp+HFjjPuhH8dxUpMDCGfEuCwLSqlsL+GkGFcf0e8jnYubppmUCufFWGut1PRmDAD/+Zi/4u1ofyWE4JxD4V3ee0QISY8opUIIKWXznJRSCHEHVhjwhWYJBzMAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/9b9e4e1bf1f103396b512825c722c867/1ee96/%ED%8F%AC%EC%8A%A4%ED%8A%B8%ED%8E%98%EC%9D%B4%EC%A7%80.webp 270w,/static/9b9e4e1bf1f103396b512825c722c867/be7f3/%ED%8F%AC%EC%8A%A4%ED%8A%B8%ED%8E%98%EC%9D%B4%EC%A7%80.webp 540w,/static/9b9e4e1bf1f103396b512825c722c867/64908/%ED%8F%AC%EC%8A%A4%ED%8A%B8%ED%8E%98%EC%9D%B4%EC%A7%80.webp 1080w,/static/9b9e4e1bf1f103396b512825c722c867/71c32/%ED%8F%AC%EC%8A%A4%ED%8A%B8%ED%8E%98%EC%9D%B4%EC%A7%80.webp 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/webp"/>
          <source srcSet="/static/9b9e4e1bf1f103396b512825c722c867/77615/%ED%8F%AC%EC%8A%A4%ED%8A%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png 270w,/static/9b9e4e1bf1f103396b512825c722c867/2d29d/%ED%8F%AC%EC%8A%A4%ED%8A%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png 540w,/static/9b9e4e1bf1f103396b512825c722c867/6d80e/%ED%8F%AC%EC%8A%A4%ED%8A%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png 1080w,/static/9b9e4e1bf1f103396b512825c722c867/171d2/%ED%8F%AC%EC%8A%A4%ED%8A%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/png"/>
          <img class="gatsby-resp-image-image css-1ou3qqd e1g4hu6w0" src="/static/9b9e4e1bf1f103396b512825c722c867/6d80e/%ED%8F%AC%EC%8A%A4%ED%8A%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png" alt="포스트페이지" title="포스트페이지" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
        </picture>
  </a>
    </span></p><p><code class="css-zjezr e1g4hu6w1">.mdx</code> 파일로부터 페이지가 잘 생성되고, 또 Markdown 문법이 HTML 문법으로 잘 변환된 것을 확인할 수 있다.</p><div><p>여기까지가 튜토리얼 6번까지 진행하며 구현할 수 있는 내용이다.</p></div><h4 class="css-1ncc39t e1g4hu6w9">3. 태그별 목록 구현하기</h4><p><a href="https://www.gatsbyjs.com/docs/adding-tags-and-categories-to-blog-posts/" class="css-dnz6zw e1g4hu6w3">Creating Tags Pages for Blog Posts</a></p><div><p>웬만한 내용은 공식홈페이지에 엄청 친절하게 쓰여 있다!</p></div><p>우선 이런 식으로 <code class="css-zjezr e1g4hu6w1">.mdx</code> 더미파일에 태그들을 적당히 추가했다.</p><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">posts/post1/index.mdx</code></div></li></ul><div class="gatsby-highlight" data-language="markdown"><pre class="language-markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml">title: 1번째 포스트입니다
date: 2022-01-01
tags: [&quot;tag1&quot;, &quot;tag2&quot;]</span>
<span class="token punctuation">---</span></span>

...</code></pre></div><div><p>이제 쿼리를 통해 MDX 노드의 frontmatter 필드에서 tags 필드가 추가된 것을 확인할 수 있다.</p></div><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1080px">
      <a class="gatsby-resp-image-link css-dnz6zw e1g4hu6w3" href="/static/5fe1e504af75d887737b6ab9fabdb74a/171d2/%ED%83%9C%EA%B7%B8-%ED%99%95%EC%9D%B8.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:64.81481481481481%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABlUlEQVQoz42Si47bIBBF/f/ftlKzm9iNH+luFGmTAObhgZkhtqGK06ZJq5V6NEIIcYDRpSjL8rigpFRKdV3Xtu1tbJrrtG2a79u2rqpmW71tyrqu621dVVVZlcU4jvM0WWsRA8eIiMfjUSwoqXSve6WOolfnszx9fp7OxhittRDydBKFBwAfYowppZwzACghrXGI5JECEhEPg+t7Y93gQxgA3AADeNn3xflsEC8555sshCAi7dAA0ziPc55TjhyVtEpfTySOxJHjBcAXYEOk6S5LKRExpTzNc/4NM3ukkzRaDoEYiYmjG6DQFgAY+RI4jtMkpWSO+ZmrHFD01mh4koNHa5DHiS9jSkkpxcz/K3sfpPH3fV/KSKJ3un9+dggInpeev5SRCIwLEHAxH24OQbtw37f0/LdMRH6A4P+RtXUeOS3knL33Nzk9gLRkThyW5AMSEls3FM4zX/6kcv1wDyH9WpymcZofa5oTEhff3qqXVVltm/1+fzgcuq7bbDavq9V6vd7tdt1C23Y/3j8e6/1j37TdT4xL5CQvXObBAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/5fe1e504af75d887737b6ab9fabdb74a/1ee96/%ED%83%9C%EA%B7%B8-%ED%99%95%EC%9D%B8.webp 270w,/static/5fe1e504af75d887737b6ab9fabdb74a/be7f3/%ED%83%9C%EA%B7%B8-%ED%99%95%EC%9D%B8.webp 540w,/static/5fe1e504af75d887737b6ab9fabdb74a/64908/%ED%83%9C%EA%B7%B8-%ED%99%95%EC%9D%B8.webp 1080w,/static/5fe1e504af75d887737b6ab9fabdb74a/71c32/%ED%83%9C%EA%B7%B8-%ED%99%95%EC%9D%B8.webp 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/webp"/>
          <source srcSet="/static/5fe1e504af75d887737b6ab9fabdb74a/77615/%ED%83%9C%EA%B7%B8-%ED%99%95%EC%9D%B8.png 270w,/static/5fe1e504af75d887737b6ab9fabdb74a/2d29d/%ED%83%9C%EA%B7%B8-%ED%99%95%EC%9D%B8.png 540w,/static/5fe1e504af75d887737b6ab9fabdb74a/6d80e/%ED%83%9C%EA%B7%B8-%ED%99%95%EC%9D%B8.png 1080w,/static/5fe1e504af75d887737b6ab9fabdb74a/171d2/%ED%83%9C%EA%B7%B8-%ED%99%95%EC%9D%B8.png 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/png"/>
          <img class="gatsby-resp-image-image css-1ou3qqd e1g4hu6w0" src="/static/5fe1e504af75d887737b6ab9fabdb74a/6d80e/%ED%83%9C%EA%B7%B8-%ED%99%95%EC%9D%B8.png" alt="태그 확인" title="태그 확인" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
        </picture>
  </a>
    </span></p><p>다음으로 태그를 통해 포스트 목록을 보여주는 페이지를 만들어야 한다. File System Route API은 별다른 설정 없이 자동으로 페이지를 생성할 수 있지만, 직접 페이지를 생성해야 할 때에는 <strong class="css-13ixm15 e1g4hu6w4">Gatsby Node API</strong>을 사용해야 한다. 지금처럼 노드가 아닌 데이터를 통해 페이지를 생성하는 경우가 그렇다.</p><div><p>Gatsby Node API를 사용하여 페이지를 생성하는 과정은 다음과 같다.</p></div><ol class="css-zd747l e1g4hu6w7"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>템플릿 컴포넌트를 작성한다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>작성한 템플릿 컴포넌트를 <code class="css-zjezr e1g4hu6w1">gatsby-node.js</code>의 <code class="css-zjezr e1g4hu6w1">createPages</code>에서 사용하여 페이지를 생성한다.</div></div></li></ol><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/templates/tag.tsx</code></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>graphql<span class="token punctuation">,</span> Link<span class="token punctuation">,</span> PageProps<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;gatsby&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>MdxNode<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;src/types&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">&#x27;src/components/layout&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">PageContextType</span> <span class="token punctuation">{</span>
  tag<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">DataType</span> <span class="token punctuation">{</span>
  allMdx<span class="token operator">:</span> <span class="token punctuation">{</span>
    edges<span class="token operator">:</span> <span class="token punctuation">{</span>node<span class="token operator">:</span> MdxNode<span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    totalCount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> pageQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query ($tag: String) {
    allMdx(
      limit: 2000
      sort: {fields: [frontmatter___date], order: DESC}
      filter: {frontmatter: {tags: {in: [$tag]}}}
    ) {
      totalCount
      edges {
        node {
          slug
          frontmatter {
            title
          }
        }
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">TagPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>pageContext<span class="token punctuation">,</span> data<span class="token punctuation">}</span><span class="token operator">:</span> PageProps<span class="token operator">&lt;</span>DataType<span class="token punctuation">,</span> PageContextType<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>tag<span class="token punctuation">}</span> <span class="token operator">=</span> pageContext<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>edges<span class="token punctuation">,</span> totalCount<span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>allMdx<span class="token punctuation">;</span>
  <span class="token keyword">const</span> tagHeader <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>totalCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> post</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
    totalCount <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">&#x27;&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;s&#x27;</span>
  <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> tagged with &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tag<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>tagHeader<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>edges<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span>node<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span>slug<span class="token punctuation">}</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span>title<span class="token punctuation">}</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>slug<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>slug <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/blog/post/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">&#x27;#&#x27;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>/blog/tags<span class="token punctuation">&#x27;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">All tags</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TagPage<span class="token punctuation">;</span></code></pre></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">gatsby-node.js</code></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> _ <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">onPostBuild</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>reporter<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> reporter<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;Page build is done!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>graphql<span class="token punctuation">,</span> actions<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>createPage<span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">graphql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    query {
      tagsGroup: allMdx(limit: 2000) {
        tags: group(field: frontmatter___tags) {
          value: fieldValue
          totalCount
        }
      }
    }
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>errors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    reporter<span class="token punctuation">.</span><span class="token function">panicOnBuild</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error while running GraphQL query.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> tags <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>tagsGroup<span class="token punctuation">.</span>tags<span class="token punctuation">;</span>
  tags<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/blog/tags/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>_<span class="token punctuation">.</span><span class="token function">kebabCase</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;src/templates/tag.tsx&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      context<span class="token operator">:</span> <span class="token punctuation">{</span>
        tag<span class="token operator">:</span> tag<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/pages/blog/tags.tsx</code></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> kebabCase <span class="token keyword">from</span> <span class="token string">&#x27;lodash/kebabCase&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Link<span class="token punctuation">,</span> graphql<span class="token punctuation">,</span> PageProps<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;gatsby&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">&#x27;src/components/layout&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">DataType</span> <span class="token punctuation">{</span>
  tagsGroup<span class="token operator">:</span> <span class="token punctuation">{</span>
    tags<span class="token operator">:</span> <span class="token punctuation">{</span>
      value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
      totalCount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> pageQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query {
    tagsGroup: allMdx(limit: 2000) {
      tags: group(field: frontmatter___tags) {
        value: fieldValue
        totalCount
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">TagsPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    tagsGroup<span class="token operator">:</span> <span class="token punctuation">{</span>tags<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> PageProps<span class="token operator">&lt;</span>DataType<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Tags</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>tags<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>tag<span class="token punctuation">.</span>value<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/blog/tags/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">kebabCase</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token punctuation">{</span>tag<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token plain-text"> (</span><span class="token punctuation">{</span>tag<span class="token punctuation">.</span>totalCount<span class="token punctuation">}</span><span class="token plain-text">)
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TagsPage<span class="token punctuation">;</span></code></pre></div><blockquote class="css-15f5hom e1g4hu6w2"><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p>템플릿 컴포넌트는 앞서 작성한 템플릿 페이지 컴포넌트와 거의 유사하다. <code class="css-zjezr e1g4hu6w1">pageContext</code>의 <code class="css-zjezr e1g4hu6w1">tag</code> 값을 쿼리 변수로 사용하고 이 쿼리 변수를 <code class="css-zjezr e1g4hu6w1">frontmatter</code>의 <code class="css-zjezr e1g4hu6w1">tags</code>가 포함하는 MDX 노드들을 가져온다.</p></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p><code class="css-zjezr e1g4hu6w1">gatsby-node.js</code>에서는 Graphql 쿼리를 날려 결과값을 받아오고, 이 결과값과 템플릿 컴포넌트를 이용해 페이지를 생성한다.</p></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><p>추가적으로 태그 목록을 확인할 수 있는 페이지를 만들었다.</p></div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><p>페이지가 잘 생성되었는지 궁금할 때엔 GraphiQL에서 다음과 같은 쿼리를 날려보면 쉽게 확인할 수 있다.</p></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// GraphQL query
{
  allSitePage {
    nodes {
      path
    }
  }
}
                                            
// 결과 예
{
  &quot;data&quot;: {
    &quot;allSitePage&quot;: {
      &quot;nodes&quot;: [
        {
          &quot;path&quot;: &quot;/blog/tags/tag-0/&quot;
        },
        {
          &quot;path&quot;: &quot;/blog/tags/tag-1/&quot;
        },
        ...
      ]
    }
  },
  &quot;extensions&quot;: {}
}</code></pre></div></div></li></ul></blockquote><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>결과1 (<code class="css-zjezr e1g4hu6w1">localhost:8000/blog/tags</code>)</div></div></li></ul><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1080px">
      <a class="gatsby-resp-image-link css-dnz6zw e1g4hu6w3" href="/static/16b3a34bd48f0cac23d955b4ce651a6c/171d2/tags.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:64.81481481481481%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAxklEQVQoz+XSy2rDMBAFUP3/71myJEsYalmgEDeBtHrM6BXqdFMCCcm2Z33vnc0QKaVzzlq7HY/btimlpmnSO6WU/CEYl5xROVJBqRCCc04pHYaBuMMhxlBrBYSYEubcWuu71lopJWcMqWAIJQX0HhEBIKUUYyRa69PpfIv2VyAi+b549/FZSn0e/7u+l7/85exfPftbzjn3t/zXMgC01upD7U7vHQBIf1etlTDGhBS3j703jqPW2lq7rqvdGWOWZTHGzPN8BY3e9K35aZLFAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/16b3a34bd48f0cac23d955b4ce651a6c/1ee96/tags.webp 270w,/static/16b3a34bd48f0cac23d955b4ce651a6c/be7f3/tags.webp 540w,/static/16b3a34bd48f0cac23d955b4ce651a6c/64908/tags.webp 1080w,/static/16b3a34bd48f0cac23d955b4ce651a6c/71c32/tags.webp 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/webp"/>
          <source srcSet="/static/16b3a34bd48f0cac23d955b4ce651a6c/77615/tags.png 270w,/static/16b3a34bd48f0cac23d955b4ce651a6c/2d29d/tags.png 540w,/static/16b3a34bd48f0cac23d955b4ce651a6c/6d80e/tags.png 1080w,/static/16b3a34bd48f0cac23d955b4ce651a6c/171d2/tags.png 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/png"/>
          <img class="gatsby-resp-image-image css-1ou3qqd e1g4hu6w0" src="/static/16b3a34bd48f0cac23d955b4ce651a6c/6d80e/tags.png" alt="tags" title="tags" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
        </picture>
  </a>
    </span></p><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>결과2 (<code class="css-zjezr e1g4hu6w1">localhost:8000/blog/tags/tag-1</code>)</div></div></li></ul><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1080px">
      <a class="gatsby-resp-image-link css-dnz6zw e1g4hu6w3" href="/static/17cf3f85bd7082dc0d882d9ffaec1c49/171d2/tag1.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:64.81481481481481%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA50lEQVQoz53R246CMBCA4b7/0xlbDjWANaUCsg4u0iOFbiR6sbvZuPDdTv9MJkWU0rZtL83ltmCM5XnOGMteKE2jhCYRoTFJCUnTNEkSQgjGGAFA+9FeAeqmruoHAOj7PryMo1PGO6W8UU5K55y11hijtUbnc5UdMn7icRwLITjnVVWVpQjvOOeQHAwrdHHQ3dWHEOb57+ffZ9Y6dIMhwj3e3ZvahhCmaZoX/9rcgdzvVYQ1vN38O/7s5DGXp1zd+3F1rAa9ovgRL0duyZ9x2OQRe+/n9Zavsihs5b1HnHOxXlmK4si+ADDN8LM3F52NAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/17cf3f85bd7082dc0d882d9ffaec1c49/1ee96/tag1.webp 270w,/static/17cf3f85bd7082dc0d882d9ffaec1c49/be7f3/tag1.webp 540w,/static/17cf3f85bd7082dc0d882d9ffaec1c49/64908/tag1.webp 1080w,/static/17cf3f85bd7082dc0d882d9ffaec1c49/71c32/tag1.webp 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/webp"/>
          <source srcSet="/static/17cf3f85bd7082dc0d882d9ffaec1c49/77615/tag1.png 270w,/static/17cf3f85bd7082dc0d882d9ffaec1c49/2d29d/tag1.png 540w,/static/17cf3f85bd7082dc0d882d9ffaec1c49/6d80e/tag1.png 1080w,/static/17cf3f85bd7082dc0d882d9ffaec1c49/171d2/tag1.png 1106w" sizes="(max-width: 1080px) 100vw, 1080px" type="image/png"/>
          <img class="gatsby-resp-image-image css-1ou3qqd e1g4hu6w0" src="/static/17cf3f85bd7082dc0d882d9ffaec1c49/6d80e/tag1.png" alt="tag1" title="tag1" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
        </picture>
  </a>
    </span></p><div><p>태그 목록으로부터 페이지가 잘 생성된 것을 확인할 수 있다.</p></div><h4 class="css-1ncc39t e1g4hu6w9">중간 정리</h4><div><p>어느 정도 기능이 자리잡은 만큼 코드를 한번 정리했다.</p></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p>URL을 간소화하기 위해 <code class="css-zjezr e1g4hu6w1">/blog</code> 아래에 위치한 페이지들을 전부 루트 위치로 이동시켰다.</p></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p>여러 페이지에서 사용되는 UI요소를 컴포넌트로 분리했다. (<code class="css-zjezr e1g4hu6w1">/blog</code>, <code class="css-zjezr e1g4hu6w1">/tag/{tag}</code>에서 사용되는 포스트 목록 등)</p></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p>여러 곳에서 쓰이는 로직은 <code class="css-zjezr e1g4hu6w1">src/utils.ts</code>로 분리했다.</p></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p><code class="css-zjezr e1g4hu6w1">src/components/postList/index.tsx</code></p></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>MdxNode<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;src/types&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PostItem <span class="token keyword">from</span> <span class="token string">&#x27;./PostItem&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">PostList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>nodes<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>nodes<span class="token operator">:</span> MdxNode<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>nodes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PostItem</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token attr-name">node</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>node<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> PostList<span class="token punctuation">;</span></code></pre></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/components/postList/postItem.tsx</code></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Link<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;gatsby&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>MdxNode<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;src/types&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>getPostUrl<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;src/utils&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TagButton <span class="token keyword">from</span> <span class="token string">&#x27;src/components/tagButton&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">PostItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>node<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>node<span class="token operator">:</span> MdxNode<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">getPostUrl</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>slug<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>tags<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TagButton</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>tag<span class="token punctuation">}</span></span> <span class="token attr-name">tag</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>tag<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> PostItem<span class="token punctuation">;</span></code></pre></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/utils.ts</code></div></li></ul><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> noUrl <span class="token operator">=</span> <span class="token string">&#x27;#&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getPostUrl</span> <span class="token operator">=</span> <span class="token punctuation">(</span>slug<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> slug <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/post/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>slug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> noUrl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getTagUrl</span> <span class="token operator">=</span> <span class="token punctuation">(</span>tag<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> tag <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/tag/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>_<span class="token punctuation">.</span><span class="token function">kebabCase</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> noUrl<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><div><p>그래서 여기까지 프로젝트 구조는 다음과 같다.</p></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">root
├src
│├components
││├layout
││├postList
││└tagButton
│├images
│├pages
││├post
│││└{mdx.slug}.tsx
││├404.tsx
││├blog.tsx
││├index.tsx
││└tag.tsx
│├templates
││└{tag}.tsx
│├types.ts
│└utils.ts
├gatsby-config.js
├gatsby-node.js
├...</code></pre></div><h4 class="css-1ncc39t e1g4hu6w9">4. 포스트 목록 페이지네이션</h4><p><strong class="css-13ixm15 e1g4hu6w4">페이지네이션(pagination)</strong>, 또는 페이징(paging)이란 많은 양의 데이터를 여러 페이지로 나누어 보여주는 과정을 말한다. 보여줄 데이터 양이 방대할 경우 데이터를 가져오거나 렌더링하는 과정이 오래 걸릴 수 있고, 보기에도 힘들어지므로 적절하게 페이지네이션 처리를 할 필요가 있다.</p><p>Gatsby 공식 문서에서 소개하는 방법(<a href="https://www.gatsbyjs.com/docs/adding-pagination/" class="css-dnz6zw e1g4hu6w3">#</a>)은 앞서 태그 페이지를 생성한 것처럼 Gatsby Node API를 이용해 각 페이지별 정적 페이지를 생성하는 것이다. 그러나 이 방법은 페이지네이션이 필요한 페이지를 생성할 때마다 새로 <code class="css-zjezr e1g4hu6w1">createPages()</code>에서 페이지 작성 코드를 추가해줘야 한다는 문제가 있다.</p><div><p>그래서 나는 이 방법 대신 리액트 컴포넌트와 훅을 이용해 client-side 페이지네이션을 구현하기로 했다. 처음에 모든 데이터를 가져온 후 렌더링에만 페이지네이션을 적용하는 것이다. 이러면 적은 양의 데이터만 가져올 수 있다는 이점은 없어지지만, 블로그라는 사이트 특성상 데이터가 많아봐야 수백 건일 것이므로 크게 신경 쓸 부분은 아니라고 생각했다. 그리고 여전히 렌더링의 이점은 챙길 수 있다.</p></div><div><p>페이지네이션에 필요한 요소로는 크게 두 가지를 생각했는데,</p></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>원본 데이터에서 특정 페이지에 표시할 데이터를 뽑아내는 기능</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>사용자가 페이지 이동을 할 수 있도록 UI를 제공하는 페이지 내비게이션</div></div></li></ul><div><p>전자는 훅으로, 후자는 훅과 컴포넌트로 구현했다. 특별히 신경 쓴 점이라면 재사용성을 고려해서 어떤 종류의 데이터라도 페이지네이션이 가능하도록 만들었다.</p></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/hooks/usePagination.ts</code></div></li></ul><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span>useCallback<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useMemo<span class="token punctuation">,</span> useState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Options</span> <span class="token punctuation">{</span>
  itemsPerPage<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  initialPage<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> usePagination <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
  data<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>itemsPerPage <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> initialPage<span class="token punctuation">}</span><span class="token operator">:</span> Options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>paginatedData<span class="token punctuation">,</span> setPaginatedData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>currPage<span class="token punctuation">,</span> setCurrPage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialPage <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> startIndex <span class="token operator">=</span> <span class="token punctuation">(</span>currPage <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> itemsPerPage<span class="token punctuation">;</span>
    <span class="token keyword">const</span> endIndex <span class="token operator">=</span> currPage <span class="token operator">*</span> itemsPerPage<span class="token punctuation">;</span>
    <span class="token function">setPaginatedData</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>startIndex<span class="token punctuation">,</span> endIndex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> currPage<span class="token punctuation">,</span> itemsPerPage<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> lastPage <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>length <span class="token operator">/</span> itemsPerPage<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>data<span class="token punctuation">.</span>length<span class="token punctuation">,</span> itemsPerPage<span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> setPage <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span>page<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">&gt;</span> lastPage<span class="token punctuation">)</span> page <span class="token operator">=</span> lastPage<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> page <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">setCurrPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>paginatedData<span class="token punctuation">,</span> currPage<span class="token punctuation">,</span> setPage<span class="token punctuation">,</span> lastPage<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> usePagination<span class="token punctuation">;</span></code></pre></div><blockquote class="css-15f5hom e1g4hu6w2"><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>재사용이 용이하도록 데이터의 타입은 generic type을 사용했고 페이지당 항목 수, 처음에 표시할 페이지와 같은 값들을 옵션으로 변경할 수 있게 만들었다.</div></div></li></ul></blockquote><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/components/pageNav/index.tsx</code></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>useEffect<span class="token punctuation">,</span> useState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>range<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;src/utils/common&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PageButton <span class="token keyword">from</span> <span class="token string">&#x27;./pageButton&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
  currPage<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  lastPage<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function-variable function">setPage</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  maxPageNavLength<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">PageNav</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  currPage<span class="token punctuation">,</span>
  lastPage<span class="token punctuation">,</span>
  setPage<span class="token punctuation">,</span>
  maxPageNavLength <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> Props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>pageList<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">usePageNav</span><span class="token punctuation">(</span>currPage<span class="token punctuation">,</span> lastPage<span class="token punctuation">,</span> maxPageNavLength<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PageButton</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>&lt;<span class="token punctuation">&#x27;</span></span>
        <span class="token attr-name">page</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>pageList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">setPage</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setPage<span class="token punctuation">}</span></span>
        <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>pageList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>pageList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PageButton</span></span>
          <span class="token attr-name">page</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>page<span class="token punctuation">}</span></span>
          <span class="token attr-name">setPage</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setPage<span class="token punctuation">}</span></span>
          <span class="token attr-name">selected</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>currPage <span class="token operator">===</span> page<span class="token punctuation">}</span></span>
          <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>page<span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PageButton</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>&gt;<span class="token punctuation">&#x27;</span></span>
        <span class="token attr-name">page</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>pageList<span class="token punctuation">[</span>pageList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">setPage</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setPage<span class="token punctuation">}</span></span>
        <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>pageList<span class="token punctuation">[</span>pageList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> lastPage<span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">usePageNav</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  currPage<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  lastPage<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  maxPageNavLength<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>pageList<span class="token punctuation">,</span> setPageNavList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> firstPageInNav <span class="token operator">=</span> currPage <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>currPage <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> maxPageNavLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> lastPageInNav <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>
      firstPageInNav <span class="token operator">+</span> maxPageNavLength<span class="token punctuation">,</span>
      lastPage <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setPageNavList</span><span class="token punctuation">(</span><span class="token function">range</span><span class="token punctuation">(</span>firstPageInNav<span class="token punctuation">,</span> lastPageInNav<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>currPage<span class="token punctuation">,</span> lastPage<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>pageList<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> PageNav<span class="token punctuation">;</span></code></pre></div><blockquote class="css-15f5hom e1g4hu6w2"><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p>마찬가지로 재사용성을 위해 페이지 내비게이션의 최대길이를 받을 수 있도록 만들었다. <code class="css-zjezr e1g4hu6w1">pageList</code>는 현재 페이지와 마지막 페이지를 받아 표시할 페이지의 리스트를 계산한 것이다.</p><p>예를 들어 최대 페이지가 15일 때, 현재 페이지가 3이면 <!-- -->[1, 2, ..., 10]<!-- -->을, 현재 페이지가 12면 <!-- -->[11, 12, ..., 15]<!-- -->를 <code class="css-zjezr e1g4hu6w1">return</code>하는 식이다.</p></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p><code class="css-zjezr e1g4hu6w1">usePageNav</code> 훅은 이 컴포넌트에서만 쓰이는 지엽적인 로직이므로 별도의 파일로 분리하지는 않았다.</p></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p>페이지 내비게이션의 버튼 역할을 하는 <code class="css-zjezr e1g4hu6w1">PageButton</code> 컴포넌트는 페이지가 바뀔 때마다(즉 <code class="css-zjezr e1g4hu6w1">PageNav</code>의 <code class="css-zjezr e1g4hu6w1">props</code>가 바뀔 때마다) 내비게이션 전체가 리렌더링되는 것을 막기 위해 <code class="css-zjezr e1g4hu6w1">React.memo()</code>를 적용해서 최적화했다.</p></div></li></ul></blockquote><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><code class="css-zjezr e1g4hu6w1">src/pages/blog.tsx</code></div></li></ul><div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>graphql<span class="token punctuation">,</span> Link<span class="token punctuation">,</span> navigate<span class="token punctuation">,</span> PageProps<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;gatsby&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">&#x27;src/components/layout&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>MdxNode<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;src/types&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PostList <span class="token keyword">from</span> <span class="token string">&#x27;src/components/postList&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> usePagination <span class="token keyword">from</span> <span class="token string">&#x27;src/hooks/usePagination&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PageNav <span class="token keyword">from</span> <span class="token string">&#x27;src/components/pageNav&#x27;</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

<span class="token keyword">const</span> <span class="token function-variable function">BlogPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>data<span class="token operator">:</span> <span class="token punctuation">{</span>allMdx<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">:</span> PageProps<span class="token operator">&lt;</span>DataType<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>paginatedData<span class="token punctuation">,</span> currPage<span class="token punctuation">,</span> lastPage<span class="token punctuation">,</span> setPage<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">usePagination</span><span class="token punctuation">(</span>
    allMdx<span class="token punctuation">.</span>nodes<span class="token punctuation">,</span>
    <span class="token punctuation">{</span>itemsPerPage<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>tags<span class="token punctuation">&#x27;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">tags</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Posts</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PostList</span></span> <span class="token attr-name">nodes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paginatedData<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PageNav</span></span>
        <span class="token attr-name">currPage</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>currPage<span class="token punctuation">}</span></span>
        <span class="token attr-name">lastPage</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>lastPage<span class="token punctuation">}</span></span>
        <span class="token attr-name">setPage</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setPage<span class="token punctuation">}</span></span>
        <span class="token attr-name">maxPageNavLength</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> BlogPage<span class="token punctuation">;</span></code></pre></div><blockquote class="css-15f5hom e1g4hu6w2"><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>임시로 페이지네이션이 잘 구현되었는지 확인하기 위해 페이지당 항목 수는 3으로, 페이지 내비게이션 길이는 5로 뒀고, 현재 선택중인 페이지는 글자색을 빨간색으로 표시하게 했다.</div></div></li></ul></blockquote><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>결과 (<code class="css-zjezr e1g4hu6w1">localhost:8000/blog</code>)</div></div></li></ul><p><img src="https://lh3.googleusercontent.com/pw/AM-JKLWxvGAgoVHDXLt-V6zsss-FzUmTFk52laXJcdVNAXzXGUpy7jBrg7UqkHYihbMVDqHsCsD-sH4hkG4jCOGy_yidLLR_Lhd_xP6fDn113JlcQjN4YsMi-o9aM20lQzGxZjZG3UhmNjiZ9Bszw0Dsf-hM=w480-h508-no?authuser=0" alt="pagination" class="css-1ou3qqd e1g4hu6w0"/></p><div><p>client-side 페이지네이션이 잘 구현되었다.</p></div><hgroup class="css-fdtbo8 e1g4hu6w13"><h2 class="css-1ah6edn e1g4hu6w11">후기</h2></hgroup><div><p>일단 블로그로서 정말 기본적인 틀은 갖췄다. 검색 기능까지 한번에 진행하고 싶었는데 생각보다 플러그인 적용에 애를 먹어서 나중에 다시 살펴봐야 될 것 같다.</p></div><div><p>현재까지 포스트 목록 표시, 포스트 페이지 생성, 태그 페이지 생성, 포스트 목록 페이지네이션 기능을 만들었고, 앞으로 추가할 예정인 기능은 우선도 순으로 다음과 같다.</p></div><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>블로그 내 포스트 검색 기능 추가</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>디자인 추가<ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>다크모드, 반응형 디자인 적용</div></div></li></ul></div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>댓글 기능 추가</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>Google Analytics 추가</div></div></li></ul><br/><hgroup class="css-fdtbo8 e1g4hu6w13"><h2 class="css-1ah6edn e1g4hu6w11">Issue</h2></hgroup><h4 class="css-1ncc39t e1g4hu6w9">페이지 쿼리를 변경해도 반영이 되지 않는 문제</h4><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><p>증상: MDX 노드들을 가져오는 부분에서 중간에 페이지 쿼리에 slug 필드를 추가했을 때 변경점이 실제 데이터 fetch에 반영되지 않았다.</p></div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div><p>원인: 쿼리를 이리저리 수정하거나 아예 지워도 이전 쿼리 상태로 동작하는 것을 보면 개발 모드에서 쿼리를 캐싱한 것이 문제가 된 것 같다.</p></div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><p>해결: <code class="css-zjezr e1g4hu6w1">gatsby clean</code> 명령어로 캐시를 전부 날려서 해결했다.</p></div></li></ul><h4 class="css-1ncc39t e1g4hu6w9">Gatsby Node API 사용 중 오류 발생</h4><ul class="css-1magvvh e1g4hu6w8"><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>증상: 공식 홈페이지의 예제를 가져와 문법만 TypeScript 문법으로 수정하고 실행했을 때 <code class="css-zjezr e1g4hu6w1">Cannot query field &quot;fields&quot; on type &quot;Mdx&quot;.</code>와 같은 오류들이 발생했다.</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>원인: 예제는 MarkdownRemark 노드를 사용하는 것이었는데 이게 MDX 노드와 구조가 달라 발생한 문제였다. (MarkdownRemark 노드는 fields 필드 안에 body 등의 필드가 들어 있었다)</div></div></li><li class="css-1o5bol2 e1g4hu6w6"><div class="css-139iib9 e1g4hu6w5"><div>해당 쿼리를 MDX 노드에 맞게 수정해서 해결했다.</div></div></li></ul></div></article></div></main><style data-emotion="css 1qwmxvm">.css-1qwmxvm{height:var(--footer-height);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-column-gap:0.25rem;column-gap:0.25rem;color:var(--color-text-footer);background-color:var(--color-bg-footer);font-size:var(--font-size-sm);font-weight:var(--font-weight-thin);}</style><footer class="css-1qwmxvm ex85nb11">Copyright <!-- -->2022<!-- -->.<style data-emotion="css rzk2xp">.css-rzk2xp{-webkit-text-decoration:underline;text-decoration:underline;font-weight:var(--font-weight-regular);}</style><a href="https://github.com/bluewood-truth" class="css-rzk2xp ex85nb10">bluewood-truth</a>All right reserved.</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/2022/02-16-gatsby-blog/";window.___webpackCompilationHash="b8d68b933a825e126c38";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-61d3e84c9f4703c089bc.js"],"app":["/app-58dbc8d2320a4185bf95.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-c355b95103524977f7b5.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-07a7047bc7d76daa7a90.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-51723f39beed7fa6effb.js"],"component---src-pages-post-mdx-slug-tsx":["/component---src-pages-post-mdx-slug-tsx-4ce64b5bf5f4c1259ceb.js"],"component---src-pages-tag-tsx":["/component---src-pages-tag-tsx-757a7e644ee01e611da9.js"],"component---src-templates-{tag}-tsx":["/component---src-templates-{tag}-tsx-08fb4418c3c2b5346751.js"]};/*]]>*/</script><script src="/polyfill-61d3e84c9f4703c089bc.js" nomodule=""></script><script src="/component---src-pages-post-mdx-slug-tsx-4ce64b5bf5f4c1259ceb.js" async=""></script><script src="/289354ec2d4c6e4cf5ed1da52de8c270038b3892-0ff34674674502ec3993.js" async=""></script><script src="/app-58dbc8d2320a4185bf95.js" async=""></script><script src="/framework-c9eaa67d651d3d5ef420.js" async=""></script><script src="/webpack-runtime-67d7efa4096309242a6a.js" async=""></script></body></html>