{"version":3,"file":"component---src-templates-{post}-tsx-content-file-path-posts-2024-02-18-remark-gfm-index-mdx-1660b200e41660750a94.js","mappings":"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","sources":["webpack://hans-blog/./posts/2024/02-18-remark-gfm/index.mdx","webpack://hans-blog/./src/templates/{post}.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    h2: \"h2\",\n    strong: \"strong\",\n    ul: \"ul\",\n    li: \"li\",\n    code: \"code\",\n    a: \"a\",\n    h3: \"h3\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.p, null, \"이 블로그에서는 gatsby-plugin-mdx 플러그인을 사용해 마크다운을 파싱 및 렌더링하고 있습니다. 이 플러그인에 remarkGfm을 적용하며 발생한 이슈입니다.\"), \"\\n\", React.createElement(_components.h2, null, \"GFM이란?\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"GitHub Flavored Markdown\"), \"의 줄임말로, 기본적인 마크다운 문법의 확장입니다. Github에서 처음 지원하기 시작했으며 다음과 같은 추가 기능을 제공합니다.\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"확장 문법: 다음과 같은 요소를 위한 문법이 추가되었습니다.\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"테이블\"), \"\\n\", React.createElement(_components.li, null, \"작업 목록 (Task list)\"), \"\\n\", React.createElement(_components.li, null, \"취소선\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"자동 링크 삽입: URL이나 이메일 주소를 자동으로 \", React.createElement(_components.code, null, \"<a>\"), \" 태그로 감쌉니다.\"), \"\\n\", React.createElement(_components.li, null, \"HTML 필터링: 마크다운에는 기본적으로 인라인 HTML 태그를 사용할 수 있지만, GFM에서는 \", React.createElement(_components.code, null, \"<script>\"), \"나 \", React.createElement(_components.code, null, \"<iframe>\"), \" 등, 몇 가지의 HTML태그가 보안상의 이유로 무시됩니다.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"대부분이 Github나 다른 마크다운 에디터에서 당연하게 사용하고 있던 기능들이라, 이것들이 확장 문법이라는 사실을 이번에 처음 알았습니다. 저는 테이블 문법이 동작하지 않는 원인을 찾다가 알게 되었습니다.\"), \"\\n\", React.createElement(_components.h2, null, \"remark-gfm 적용\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.a, {\n    href: \"https://www.gatsbyjs.com/plugins/gatsby-plugin-mdx/#mdxoptions\"\n  }, \"gatsby-plugin-mdx 공식문서\"), \"에 의하면, GFM을 적용하려면 gatsby-config에 remark-gfm을 추가해야 합니다. 저는 이 과정에서 두 가지 이슈를 겪었습니다.\"), \"\\n\", React.createElement(_components.h3, null, \"모듈 시스템 문제\"), \"\\n\", React.createElement(_components.p, null, \"처음에 별 생각 없이 문서의 예시를 그대로 사용했는데 아래와 같은 에러가 발생했습니다. CommonJS에서 ESM의 구문(import문)을 사용했기 때문입니다.\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"text\\\"><pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">SyntaxError: Cannot use import statement outside a module</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"반대로 import문을 require로 고쳐봤더니 또다시 에러가 발생했습니다. 알고 보니 \", React.createElement(_components.code, null, \"remark-gfm\"), \"은 ES 모듈이었고, 이를 \", React.createElement(_components.code, null, \"require()\"), \"로 불러오려고 해서 발생한 문제였습니다.\"), \"\\n\", React.createElement(_components.p, null, \"이를 해결하기 위해 \", React.createElement(_components.a, {\n    href: \"https://www.gatsbyjs.com/docs/how-to/custom-configuration/es-modules/\"\n  }, \"공식 문서\"), \"를 참고해 gatsby 파일들을 CommonJS에서 ESM으로 마이그레이션하는 작업을 진행했습니다.\"), \"\\n\", React.createElement(_components.h3, null, \"패키지 버전 문제\"), \"\\n\", React.createElement(_components.p, null, \"모듈 시스템 문제를 해결하고 다시 실행해보니 이번에는 아래와 같은 에러가 발생했습니다.\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"text\\\"><pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">ERROR #gatsby-plugin-mdx_10001 PLUGIN\\n...\\nTypeError: Cannot read properties of undefined (reading 'inTable')</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"remarkGfm이 작동하는 과정에서 라이브러리 내부적으로 뭔가 이슈가 발생한 것 같았습니다. 구글링을 했더니 이미 \", React.createElement(_components.a, {\n    href: \"https://github.com/gatsbyjs/gatsby/issues/38789\"\n  }, \"동일한 이슈\"), \"가 올라와 있었습니다.\"), \"\\n\", React.createElement(_components.p, null, \"해당 이슈에서 제안한 대로 \", React.createElement(_components.code, null, \"remark-gfm\"), \"의 버전을 4.0.0에서 3.0.1(4.0.0 바로 아래 버전)로 낮춰서 해결했습니다.\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/Users/hans/Developer/ToyProject/bluewood-truth.github.io/posts/2024/02-18-remark-gfm/index.mdx\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport {routes} from 'src/_common/constants/routes';\nimport {SEO} from 'src/components/seo';\nimport {Layout} from 'src/views/layout';\nimport {PostLayout} from 'src/views/post-layout';\nimport {jsx as ___EmotionJSX} from \"@emotion/react\";\nconst pageQuery = \"3375554023\";\nexport const Head = _ref => {\n  let {data, ...props} = _ref;\n  return ___EmotionJSX(SEO, _extends({\n    title: data.mdx.frontmatter.title\n  }, props));\n};\nconst PostPage = _ref2 => {\n  var _location$state$refer, _location$state;\n  let {data: {mdx}, location, children} = _ref2;\n  return ___EmotionJSX(Layout, null, ___EmotionJSX(PostLayout, {\n    backUrl: (_location$state$refer = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.referrer) !== null && _location$state$refer !== void 0 ? _location$state$refer : routes.home,\n    post: mdx\n  }, children));\n};\nPostPage\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostPage, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n"],"names":["_createMdxContent","props","_components","Object","assign","p","h2","strong","ul","li","code","a","h3","span","_provideComponents","components","React","href","dangerouslySetInnerHTML","__html","wrapper","MDXLayout","Head","_ref","data","___EmotionJSX","SEO","_extends","title","mdx","frontmatter","PostPage","_ref2","_location$state$refer","_location$state","location","children","Layout","PostLayout","backUrl","state","referrer","routes","home","post","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}